"use strict";(self.webpackChunkadmin_ucac_dashboard=self.webpackChunkadmin_ucac_dashboard||[]).push([[467],{9930:(Z,x,u)=>{u.d(x,{u:()=>D});var g=u(2340),f=u(7587),e=u(520),w=u(4920);let D=(()=>{class o{constructor(i,c){this.http=i,this.baseUrlSvr=c,this.url="",this.urlCodeTest="",this.urlSendEmail="",this.urlUploadImage="",this.url=`${this.baseUrlSvr.getOrigin()}${g.N.candidaturePath}`,this.urlCodeTest=this.url+"candidature/all-codes",this.urlUploadImage=this.url+"candidature/file/uploadFile",this.urlSendEmail=this.url+"email/send",this.url+="candidature/"}uploadImage(i,c){const C=new FormData;return C.append("file",i),this.http.post(this.urlUploadImage+c,C)}sendEmail(i){return this.http.post(this.urlSendEmail,i,{responseType:"text"})}addCandidature(i){return this.http.post(this.url,i)}allCodes(){return this.http.get(this.urlCodeTest)}liste(){return this.http.get(this.url+"candidats")}nonEntretenu(){return this.http.get(this.url+"candidats/nonEntretenus")}nonEntretenuByZone(i){return this.http.get(this.url+"candidats/nonEntretenusByZone/"+i)}update(i,c){return this.http.patch(this.url+"candidats/update/"+i,c)}allByZone(i){return this.http.get(this.url+"allbyzone/"+i)}allSolvableByZone(i,c){return this.http.get(this.url+"allbysolvabilitezone/"+i+"/"+c)}allAdmissibleByZone(i){return this.http.get(this.url+"admissiblebyzone/"+i)}allAdmissByZone(i){return this.http.get(this.url+"admisbyzone/"+i)}allByCentre(i){return this.http.get(this.url+"allbycentreexamen/"+i)}allByParcours(i){return this.http.post(this.url+"filteredcandidats",{parcours:!0,cycle:!1,valeaurParcours:i,valeurCycle:"string"})}allByCycle(i){return this.http.post(this.url+"filteredcandidats",{parcours:!1,cycle:!0,valeaurParcours:"string",valeurCycle:i})}allByCycleAndParcours(i,c){return this.http.post(this.url+"filteredcandidats",{parcours:!0,cycle:!0,valeaurParcours:c,valeurCycle:i})}allSolvableByCentre(i,c){return this.http.get(this.url+"allbysolvabilitecentreexamen/"+i+"/"+c)}allAdmissibleByCentre(i){return this.http.get(this.url+"admissiblebycentreexamen/"+i)}allAdmissByCentre(i){return this.http.get(this.url+"admisbycentreexamen/"+i)}allBySite(i){return this.http.get(this.url+"allbysite/"+i)}allSolvableBySite(i,c){return this.http.get(this.url+"allbysolvabilitesite/"+i+"/"+c)}allAdmissibleBySite(i){return this.http.get(this.url+"admissiblebysite/"+i)}allAdmissBySite(i){return this.http.get(this.url+"admisbysite/"+i)}getOne(i){return this.http.get(this.url+i)}getStatistics(){return this.http.get(this.url+"statistics")}downloadCandidatureFile(){return this.http.get(this.url+"candidatures/download",{responseType:"blob"})}downloadCandidatureFileFor(i,c){return this.http.post(this.url+"filteredcandidats/download",{parcours:!0,cycle:!0,valeaurParcours:c,valeurCycle:i},{responseType:"blob"})}downloadAdmissibleCandidatureFile(){return this.http.get(this.url+"candidatures/download",{responseType:"blob"})}downloadAdmissibleCandidatureFileByZone(i){return this.http.get(this.url+"download/admissiblebyzone/"+i,{responseType:"blob"})}downloadAdmissibleCandidatureFileByCentre(i){return this.http.get(this.url+"download/admissiblebycentreexamen/"+i,{responseType:"blob"})}downloadAdmissibleCandidatureFileBySite(i){return this.http.get(this.url+"download/admissiblebysite/"+i,{responseType:"blob"})}downloadAdmissCandidatureFile(){return this.http.get(this.url+"candidatures/download",{responseType:"blob"})}downloadAdmisCandidatureFileByZone(i){return this.http.get(this.url+"download/admisbyzone/"+i,{responseType:"blob"})}downloadAdmisCandidatureFileByCentre(i){return this.http.get(this.url+"download/admisbycentreexamen/"+i,{responseType:"blob"})}downloadAdmisCandidatureFileBySite(i){return this.http.get(this.url+"download/admisbyste/"+i,{responseType:"blob"})}downloadSolvableCandidatureFile(i){return this.http.get(this.url+"download/allbysolvabilite/"+i,{responseType:"blob"})}delete(i){return this.http.delete(this.url+i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(e.eN),f.LFG(w.x))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},2467:(Z,x,u)=>{u.r(x),u.d(x,{ScheduleInterviewerModule:()=>ie});var g=u(9808),f=u(7671),e=u(7587),w=u(3322),D=u(9930),o=u(7921),p=u(7755),i=u(9099),c=u(62),C=u(8766),T=u(7212),M=u(9783),I=u(4036),S=u(2382),E=u(9142),P=u(4255),F=u(845),U=u(1424),B=u(5315);function R(a,_){if(1&a&&(e.TgZ(0,"li",29),e._UZ(1,"p-tag",30),e.TgZ(2,"span",31),e._uU(3),e.qZA()()),2&a){const t=_.$implicit,s=e.oxw(2);let n;e.xp6(1),e.s9C("value",null!==(n=null==(n=s.zones.get(t.idZone))?null:n.nom)&&void 0!==n?n:""),e.xp6(2),e.AsE("",t.name," ",t.prenom,"")}}function N(a,_){if(1&a&&(e.TgZ(0,"div",23)(1,"div",24)(2,"h4",25),e._uU(3),e.qZA()(),e.TgZ(4,"div",26)(5,"ul",27),e.YNc(6,R,4,3,"li",28),e.qZA()()()),2&a){const t=_.$implicit,s=e.oxw();e.xp6(3),e.Oqu(t),e.xp6(3),e.Q6J("ngForOf",s.juriesByDispo.get(t))}}function j(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"div",32)(1,"div")(2,"h2"),e._uU(3,"Nouvel entretien"),e.qZA(),e.TgZ(4,"h4",33),e._uU(5),e.ALo(6,"date"),e.qZA()(),e.TgZ(7,"div")(8,"button",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.filterGroupedFormations=n.groupedFormations}),e.qZA(),e.TgZ(9,"span",35),e._UZ(10,"i",36),e.TgZ(11,"p-dropdown",37),e.NdJ("onChange",function(n){return e.CHM(t),e.oxw().handleFormationSelect(n)}),e.qZA()()()(),e.TgZ(12,"div",38),e._UZ(13,"p-tag",39),e.TgZ(14,"p-tag",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().showMainDialog()}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(5),e.hij(" Session de ",e.Dn7(6,7,null==t.session?null:t.session.date_examen,"MMMM","fr")," "),e.xp6(6),e.Q6J("tooltipPosition","top")("options",t.formations)("filter",!0)("showClear",!0)("showClear",!0),e.xp6(3),e.s9C("value",t.activeHoraire)}}function H(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"div",32)(1,"div")(2,"h2"),e._uU(3,"Nouvel entretien"),e.qZA(),e.TgZ(4,"h4",33),e._uU(5),e.ALo(6,"date"),e.qZA()(),e.TgZ(7,"div")(8,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return n.filterGroupedFormations=n.groupedFormations}),e.qZA(),e.TgZ(9,"span",35),e._UZ(10,"i",36),e.TgZ(11,"p-dropdown",37),e.NdJ("onChange",function(n){return e.CHM(t),e.oxw(2).handleFormationSelect(n)}),e.qZA()()()(),e.TgZ(12,"div",38),e._UZ(13,"p-tag",39),e.TgZ(14,"p-tag",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showMainDialog()}),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(5),e.hij("Session de ",e.Dn7(6,7,null==t.session?null:t.session.date_examen,"MMMM","fr"),""),e.xp6(6),e.Q6J("tooltipPosition","top")("options",t.formations)("filter",!0)("showClear",!0)("showClear",!0),e.xp6(3),e.s9C("value",t.activeHoraire)}}function L(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"th")(2,"th",51),e.TgZ(3,"th",51)(4,"div",52),e._uU(5," Plage 1 "),e.TgZ(6,"p-tag",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return n.showDialog(n.firstPlages,1)}),e.qZA()()(),e.TgZ(7,"th",51)(8,"div",52),e._uU(9," Plage 2 "),e.TgZ(10,"p-tag",54),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return n.showDialog(n.secondPlages,2)}),e.qZA()()()()}if(2&a){const t=e.oxw(2);e.xp6(6),e.Q6J("value",t.plage1),e.xp6(4),e.Q6J("value",t.plage2)}}function q(a,_){if(1&a&&(e.TgZ(0,"td",59)(1,"div"),e._uU(2,"Jurys disponible"),e.qZA()()),2&a){const t=e.oxw().rowspan;e.uIk("rowspan",t)}}function z(a,_){if(1&a&&(e.TgZ(0,"div",52)(1,"span"),e._uU(2),e.qZA()()),2&a){const t=_.$implicit;e.xp6(2),e.Oqu(t.label)}}function Y(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"p-dropdown",60),e.NdJ("onChange",function(n){e.CHM(t);const l=e.oxw().rowIndex,d=e.oxw(2);return d.handleCandidatSelect(n,d.plage1,l)}),e.YNc(1,z,3,1,"ng-template",61),e.qZA()}if(2&a){const t=e.oxw(3);e.Q6J("tooltipPosition","top")("options",t.filterGroupedFormations)("group",!0)("filter",!0)("showClear",!0)}}const A=function(){return[]};function Q(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,q,3,1,"td",55),e.TgZ(2,"td")(3,"p-dropdown",56),e.NdJ("onChange",function(n){const d=e.CHM(t).rowIndex;return e.oxw(2).handleInterviewerSelect(n,d)}),e.qZA()(),e.TgZ(4,"td"),e.YNc(5,Y,2,5,"p-dropdown",57),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"input",58),e.qZA()()}if(2&a){const t=_.rowIndex,s=_.rowgroup,n=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",s),e.xp6(2),e.Q6J("tooltipPosition","top")("options",n.getAvalaibleJury(n.juriesByDispo.get(n.activeHoraire)||e.DdM(12,A),n.activeHoraire))("filter",!0)("showClear",!0)("showClear",!0)("disabled","Selectionner"==n.plage1)("readonly","Selectionner"==n.plage1),e.xp6(2),e.Q6J("ngIf","Selectionner"!=n.plage1),e.xp6(2),e.Q6J("readOnly",!0)("disabled",!0)("ngModel",null==(l=n.selectCandidatMap.get(n.currentDay.getTime()+" - "+n.activeHoraire+" - "+t+" - "+n.plage2))?null:l.label)}}function k(a,_){1&a&&(e.TgZ(0,"tr")(1,"td",62),e._uU(2,"Aucun jury disponible pour le moment."),e.qZA()())}function $(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"p-tag",65),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(3).selectPlage(l)}),e.qZA()}2&a&&e.Q6J("value",_.$implicit)}function W(a,_){if(1&a&&(e.TgZ(0,"div",63),e.YNc(1,$,1,1,"p-tag",64),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.selectPlages)}}function K(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"p-tag",65),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(3).selectMainPlage(l)}),e.qZA()}2&a&&e.Q6J("value",_.$implicit)}function G(a,_){if(1&a&&(e.TgZ(0,"div",63),e.YNc(1,K,1,1,"p-tag",64),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.horaires)}}const O=function(){return[5,10,25,50]},J=function(){return["horaire"]},X=function(){return{width:"50vw"}};function V(a,_){if(1&a){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"div",18)(3,"p-table",19,20),e.YNc(5,H,15,11,"ng-template",21),e.YNc(6,L,11,2,"ng-template",22),e.YNc(7,Q,8,13,"ng-template",41),e.YNc(8,k,3,0,"ng-template",42),e.qZA(),e.TgZ(9,"div",43)(10,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().validate()}),e.qZA()()(),e.TgZ(11,"p-dialog",45),e.NdJ("visibleChange",function(n){return e.CHM(t),e.oxw().visible=n}),e.TgZ(12,"div",46)(13,"div",47)(14,"label",48),e._uU(15,"Plages"),e.qZA(),e.YNc(16,W,2,1,"div",49),e.YNc(17,G,2,1,"div",49),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("value",t.juriesByDispo.get(t.activeHoraire)||e.DdM(18,A))("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(19,O))("loading",t.loading)("paginator",!0)("globalFilterFields",e.DdM(20,J)),e.xp6(7),e.Q6J("disabled",!t.canSave),e.xp6(1),e.Akn(e.DdM(21,X)),e.Q6J("closable",!0)("visible",t.visible)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1),e.xp6(5),e.Q6J("ngIf",!t.visibleMainPlage),e.xp6(1),e.Q6J("ngIf",t.visibleMainPlage)}}const ee=[{path:"",component:(()=>{class a{constructor(t,s,n,l,d,m,b,y,r,h){this.disponibilitySrv=t,this.candidatureSrv=s,this.sessionSrv=n,this.zoneService=l,this.compteSrv=d,this.commonService=m,this.noteService=b,this.compteDisponibiliteService=y,this.router=r,this.messageService=h,this.currentDay=new Date,this.visible=!1,this.canSave=!1,this.visibleMainPlage=!1,this.numberOfCandidatToInterview=0,this.selectCandidatMap=new Map,this.indexCurrentDate=0,this.datesOfEntretiens=[],this.noteRequests=[],this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.activeHoraire="Selectionner",this.plage1="Selectionner",this.plage2="Selectionner",this.plageRanking=0,this.selectPlages=[],this.firstPlages=["08h00 - 08h20","09h00 - 09h20","10h00 - 10h20","11h00 - 11h20"],this.secondPlages=["08h30 - 08h50","09h30 - 09h50","10h30 - 10h50","11h30 - 11h50"],this.formations=[{name:"Ing\xe9nieur g\xe9n\xe9raliste par apprentissage ou g\xe9nie des proc\xe9d\xe9s",code:"L"},{name:"Ing\xe9nieur g\xe9n\xe9raliste parcours international",code:"OP"},{name:"Ing\xe9nieur g\xe9neraliste parcours international et innovation",code:"I"},{name:"Ing\xe9nieur g\xe9nie Informatique",code:"X"}],this.juries=[{name:"",value:"",horaire:""},{name:"",value:"",horaire:""},{horaire:"",name:"",value:""}],this.horaires=[],this.disponibilities=[],this.zonesList=[],this.selectedZone={id:0,nom:"",description:"",count_site:0},this.loading=!1,this.test={label:"FA",items:[{label:"Minyemeck danielle",candidat:{id:27,centreExamenId:17,sessionId:1,langue:"Anglais",serie_bac:null,nom_parent1:null,nom_parent2:null,email_pere:null,telephone_pere:null,email_tuteur:null,telephone_tuteur:null,email_mere:null,telephone_mere:null,telephone_paiement:null,has_exchange:!1,formation_principal:null,datePaiement:null,statut:"Admis",solvable:!1,code_examen:"24",cycle:"second",diplome_universitaire:null,compte:{id:27,name:"Minyemeck",prenom:"danielle",password:"$2a$10$iyL5gzCHSQtqTRhUu.k8Q.yZ7e.W3sJRrs7ZNwB278BLRadnZ2e3q",email:"vassistanthub@gmail.com",telephone:"675272892",role:"CANDIDAT",id_disponibilite:0},centre:"Maroua",nombre_choix:1,candidatureActif:!0,formation1:"FA",formation2:"",formation3:"",paiement:"20 000 FCFA",reference_paiement:"DE33",image:"",genre:"F",nationalite:"Camerounaise",lieu_de_naissance:"Koyom",date_naissance:"2023-02-28",dernier_Etablissement:"Leti"}}]},this.candidats=[]}getAvalaibleJury(t,s){return t.map(n=>({name:n.name+" "+n.prenom,horaire:s,value:(n.id||0)+""}))}getCandidatures(t){this.candidatureSrv.nonEntretenuByZone(t).subscribe({next:s=>{s=s.filter(r=>1==r.solvable&&"Admissible"==r.statut),this.numberOfCandidatToInterview=s.length,console.log("result: ",this.numberOfCandidatToInterview),this.candidats=s,this.groupedFormations=[];let n=s.filter(r=>"FA"===r.formation1).map(r=>{var h,v;return{label:(null===(h=null==r?void 0:r.compte)||void 0===h?void 0:h.name)+" "+(null===(v=null==r?void 0:r.compte)||void 0===v?void 0:v.prenom),candidat:r}});n.length>0&&this.groupedFormations.push({label:"FA",items:n});let l=s.filter(r=>"IP"===r.formation1).map(r=>{var h,v;return{label:(null===(h=null==r?void 0:r.compte)||void 0===h?void 0:h.name)+" "+(null===(v=null==r?void 0:r.compte)||void 0===v?void 0:v.prenom),candidat:r}});l.length>0&&this.groupedFormations.push({label:"IP",items:l});let d=s.filter(r=>"I"===r.formation1).map(r=>{var h,v;return{label:(null===(h=null==r?void 0:r.compte)||void 0===h?void 0:h.name)+" "+(null===(v=null==r?void 0:r.compte)||void 0===v?void 0:v.prenom),candidat:r}});d.length>0&&this.groupedFormations.push({label:"I",items:d});let m=s.filter(r=>"X"===r.formation1).map(r=>{var h,v;return{label:(null===(h=null==r?void 0:r.compte)||void 0===h?void 0:h.name)+" "+(null===(v=null==r?void 0:r.compte)||void 0===v?void 0:v.prenom),candidat:r}});m.length>0&&this.groupedFormations.push({label:"X",items:m});let b=s.filter(r=>"L"===r.formation1).map(r=>{var h,v;return{label:(null===(h=null==r?void 0:r.compte)||void 0===h?void 0:h.name)+" "+(null===(v=null==r?void 0:r.compte)||void 0===v?void 0:v.prenom),candidat:r}});b.length>0&&this.groupedFormations.push({label:"L",items:b});let y=s.filter(r=>"OP"===r.formation1).map(r=>{var h,v;return{label:(null===(h=null==r?void 0:r.compte)||void 0===h?void 0:h.name)+" "+(null===(v=null==r?void 0:r.compte)||void 0===v?void 0:v.prenom),candidat:r}});y.length>0&&this.groupedFormations.push({label:"OP",items:y}),this.filterGroupedFormations=this.groupedFormations}})}ngOnInit(){this.zones=new Map,this.juriesByDispo=new Map,this.noteRequestMaps=new Map,this.selectCandidatMap=new Map,this.getActiveSession(),this.getDisponibilities(),this.getCandidatures(this.selectedZone.id||1),this.getZones(),console.log(this.zones)}showDialog(t,s){this.selectPlages=t,this.plageRanking=s,this.visible=!0}showMainDialog(){this.visibleMainPlage=!0,this.visible=!0}selectMainPlage(t){this.activeHoraire=t,this.alreadyUseCandidats=[],this.alreadyUseJuries=[],this.noteRequestMaps=new Map,this.selectCandidatMap=new Map,this.noteRequests=[],console.log("plage: ",t),t.indexOf("8h")>-1?(this.firstPlages=["08h00 - 08h20","09h00 - 09h20","10h00 - 10h20","11h00 - 11h20"],this.secondPlages=["08h30 - 08h50","09h30 - 09h50","10h30 - 10h50","11h30 - 11h50"]):(this.firstPlages=["13h00 - 13h20","14h00 - 14h20","15h00 - 15h20","16h00 - 16h20"],this.secondPlages=["13h30 - 13h50","14h30 - 14h50","15h30 - 15h50","16h30 - 16h50"]),this.plage1="Selectionner",this.plage2="Selectionner",this.visible=!1,this.visibleMainPlage=!1}selectPlage(t){if(this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.noteRequests=[],this.noteRequestMaps=new Map,this.selectCandidatMap=new Map,1==this.plageRanking){let s=this.firstPlages.findIndex(n=>n==t);this.plage1=t,this.plage2=this.secondPlages[s]}else{let s=this.secondPlages.findIndex(n=>n==t);this.plage2=t,this.plage1=this.firstPlages[s]}this.visible=!1}getZones(){this.zoneService.liste().subscribe({next:t=>{for(let s=0;s<t.length;s++){const n=t[s];this.zones.set(n.id||0,n)}console.log(this.zones),this.zonesList=[...this.zones.values()]},error:t=>{console.log("error: ",t)}})}handleInterviewerSelect(t,s){let n=t.value;if(this.alreadyUseJuries.find(d=>d.id==parseInt(n.value)))this.messageService.add({severity:"error",summary:"Erreur d'assignation",detail:"Ce jury a d\xe9j\xe0 \xe9t\xe9 utilis\xe9 pour cette plage veuillez changer de jury"});else{let d=this.currentDay.getDate()+" - "+this.currentDay.getFullYear()+" - "+this.activeHoraire+" - "+s;if(this.noteRequestMaps.has(d)){console.log("test: ",this.noteRequestMaps.values());let m=this.noteRequestMaps.get(d);this.noteRequestMaps.set(d,{compteid:parseInt(n.value),candidatureid:m.candidatureid,debut_entretien:m.debut_entretien,fin_entretien:m.fin_entretien,commentaires:""})}else this.noteRequestMaps.set(d,{compteid:parseInt(n.value),candidatureid:0,debut_entretien:new Date,fin_entretien:new Date,commentaires:""});this.alreadyUseJuries.push({rowIndex:s,id:parseInt(n.value)})}this.randomizeCandidatDisplay()}handleFormationSelect(t){let s=t.value;this.filterGroupedFormations=this.groupedFormations.filter(n=>n.label==s.code)}getActiveSession(){this.sessionSrv.getActive().subscribe({next:t=>{this.session=t}})}handleCandidatSelect(t,s,n){let l=t.value;if(this.alreadyUseCandidats.find(m=>m.id==l.candidat.id))this.messageService.add({severity:"error",summary:"Erreur d'assignation",detail:"Ce candidat a d\xe9j\xe0 \xe9t\xe9 utilis\xe9 pour cette plage veuillez changer de candidat"});else{let m=this.currentDay.getDate()+" - "+this.currentDay.getFullYear()+" - "+this.activeHoraire+" - "+n;if(this.noteRequestMaps.has(m)){let b=this.noteRequestMaps.get(m),y=this.commonService.buildDate(this.currentDay,s);this.noteRequestMaps.set(m,{compteid:b.compteid,candidatureid:l.candidat.id||0,debut_entretien:new Date(y.startDate),fin_entretien:new Date(y.endDate),commentaires:""}),this.selectCandidatMap.set(m,{candidat:l.candidat,label:l.candidat.compte.name+" "+l.candidat.compte.prenom})}else{let b=this.commonService.buildDate(this.currentDay,s);this.noteRequestMaps.set(m,{compteid:0,candidatureid:l.candidat.id||0,debut_entretien:new Date(b.startDate),fin_entretien:new Date(b.endDate),commentaires:""}),this.selectCandidatMap.set(m,{candidat:l.candidat,label:l.candidat.compte.name+" "+l.candidat.compte.prenom})}this.alreadyUseCandidats.push({rowIndex:n,id:l.candidat.id||0})}this.randomizeCandidatDisplay()}getCandidat(t){let s=this.candidats.find(n=>n.id==(null==t?void 0:t.candidatureid));return s?{label:s.compte.name+" "+s.compte.prenom,candidat:s}:null}getJury(t){}randomizeCandidatDisplay(){let t=(this.juriesByDispo.get(this.activeHoraire)||[]).length;if(this.alreadyUseCandidats.length==t&&this.alreadyUseJuries.length==t||1==this.numberOfCandidatToInterview){for(let s=0;s<t;s++){let l=this.alreadyUseJuries[s],d=this.alreadyUseCandidats[s==t-1?0:s+1],m=this.commonService.buildDate(this.currentDay,this.plage2),b=this.currentDay.getTime()+" - "+this.activeHoraire+" - "+s+" - "+this.plage2;if(null==d?void 0:d.id){this.noteRequestMaps.set(b,{compteid:null==l?void 0:l.id,candidatureid:null==d?void 0:d.id,debut_entretien:new Date(m.startDate),fin_entretien:new Date(m.endDate),commentaires:""});let y=this.candidats.find(r=>r.id==(null==d?void 0:d.id));y&&this.selectCandidatMap.set(b,{candidat:y,label:y.compte.name+" "+y.compte.prenom})}}this.canSave=!0}}getDisponibilities(){this.disponibilitySrv.liste().subscribe({next:t=>{let s=[];this.disponibilities=t;for(let n=0;n<t.length;n++){const l=t[n];let d=new Date(l.date_disponibilite);d.setHours(0,0,0,0),s.findIndex(h=>h.getTime()==d.getTime())<=-1&&s.push(d);let r=this.commonService.formatDate(l.debut_disponibilite)+" - "+this.commonService.formatDate(l.fin_disponibilite);this.horaires.includes(r)||this.horaires.push(r)}this.datesOfEntretiens=[...new Set(s)],this.datesOfEntretiens.sort((n,l)=>n.getTime()-l.getTime()),this.indexCurrentDate=0,this.currentDay=this.datesOfEntretiens[this.indexCurrentDate],this.getCompteDisponibilite()},error:t=>{}})}getCompteDisponibilite(){this.juriesByDispo=new Map,this.compteDisponibiliteService.liste().subscribe({next:t=>{for(let s=0;s<t.length;s++){const n=t[s];let l=this.disponibilities.find(r=>r.id==n.disponibilite.id),b=this.commonService.formatDate(l.debut_disponibilite)+" - "+this.commonService.formatDate(l.fin_disponibilite),y=new Date(l.date_disponibilite);if(y.setHours(0,0,0,0),this.currentDay.getTime()==y.getTime())if(this.juriesByDispo.has(b)){let r=this.juriesByDispo.get(b);(null==r?void 0:r.find(v=>v.id==n.compte.id))||null==r||r.push(n.compte)}else this.juriesByDispo.set(b,[n.compte])}}})}getCompteDisponibiliteByZone(t){this.juriesByDispo=new Map,this.compteDisponibiliteService.allByZone(t).subscribe({next:s=>{for(let n=0;n<s.length;n++){const l=s[n];let d=this.disponibilities.find(h=>h.id==l.disponibilite.id),y=this.commonService.formatDate(d.debut_disponibilite)+" - "+this.commonService.formatDate(d.fin_disponibilite),r=new Date(d.date_disponibilite);if(r.setHours(0,0,0,0),this.currentDay.getTime()==r.getTime())if(this.juriesByDispo.has(y)){let h=this.juriesByDispo.get(y);(null==h?void 0:h.find(ne=>ne.id==l.compte.id))||null==h||h.push(l.compte)}else this.juriesByDispo.set(y,[l.compte])}}})}previousDate(t){this.indexCurrentDate>0&&(this.indexCurrentDate=this.indexCurrentDate-1,this.currentDay=this.datesOfEntretiens[this.indexCurrentDate],this.activeHoraire="Selectionner",this.plage1="Selectionner",this.plage2="Selectionner",this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.noteRequests=[],this.noteRequestMaps=new Map,this.commonService.clear(t),this.getCompteDisponibilite())}nextDate(t){this.indexCurrentDate<this.datesOfEntretiens.length&&(this.indexCurrentDate=this.indexCurrentDate+1,this.currentDay=this.datesOfEntretiens[this.indexCurrentDate],this.activeHoraire="Selectionner",this.plage1="Selectionner",this.plage2="Selectionner",this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.noteRequests=[],this.noteRequestMaps=new Map,this.commonService.clear(t),this.getCompteDisponibilite())}validate(){let n=this.noteRequestMaps.values();for(let d of n)(null==d?void 0:d.candidatureid)&&(null==d?void 0:d.candidatureid)>0&&this.noteService.create(d).subscribe({next:m=>{this.loading=!1,this.selectCandidatMap=new Map,this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.noteRequests=[],this.noteRequestMaps=new Map,this.messageService.add({severity:"success",summary:"Assignation du jury pour entretien",detail:"Assignation du jury pour un entretien avec le candidat effectu\xe9e avec success pour la date du "+this.currentDay.toString()})},error:m=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Erreur d'assignation",detail:m.error.message})}});this.selectCandidatMap=new Map;let l=this.juriesByDispo.get(this.activeHoraire)||[];this.juriesByDispo.set(this.activeHoraire,[]),this.getCandidatures(this.selectedZone.id||0),setTimeout(()=>{this.juriesByDispo.set(this.activeHoraire,l)},1e3)}onZoneChange(t){this.getCompteDisponibiliteByZone(this.selectedZone.id||0),this.getCandidatures(this.selectedZone.id||0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(w.T),e.Y36(D.u),e.Y36(o.K),e.Y36(p.b),e.Y36(i.D),e.Y36(c.v),e.Y36(C.Y),e.Y36(T.R),e.Y36(f.F0),e.Y36(M.ez))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-schedule-interviewer"]],decls:36,vars:18,consts:[[1,"schedule-interviewer-page","calendrier-page","page-content"],[1,"page-title"],[1,"pi","pi-angle-right"],[1,"page-header"],[1,"line"],[1,"card","p-block-1"],[1,"main"],[1,"vh-center","gap-1","mb-3"],[1,"icon-btn-round","cursor-pointer",3,"click"],[1,"pi","pi-angle-left"],[1,"active-day"],[1,"jurys-plages"],[1,"vh-center","jurys-filter","flex","justify-content-end"],["optionLabel","nom","placeholder","S\xe9lectionner une zone",3,"options","ngModel","ngModelChange","onChange"],[1,"vh-center","jurys-plages-title-content"],[1,"title"],[1,"grid"],["class","col-12 md:col-6",4,"ngFor","ngForOf"],[1,"card","mt-3"],["dataKey","id","currentPageReportTemplate","Pr\xe9sente {first} \xe0 {last} de {totalRecords} entr\xe9es","groupRowsBy","horaire","sortField","horaire","sortMode","single","rowGroupMode","rowspan",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],[1,"col-12","md:col-6"],[1,"horaire-card-title"],[1,"title","text-center"],[1,"horaire-card-content"],[1,"list-none"],["class","text-base font-semibold v-center",4,"ngFor","ngForOf"],[1,"text-base","font-semibold","v-center"],[3,"value"],[1,"ml-2"],[1,"vh-space-between","flex","justify-content-between"],[1,"text-orange-500"],["pButton","","label","Reiniatialiser","icon","pi pi-filter-slash",1,"p-button-outlined","mr-2",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-filter-slash"],["optionLabel","name","placeholder","Filtrer par formation prioritaire",3,"tooltipPosition","options","filter","showClear","onChange"],[1,"vh-end","flex-wrap"],["severity","danger","value","Plage horaire :","styleClass","tag-style"],["severity","danger","styleClass","tag-style basic-bg cursor-pointer",3,"value","click"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"mt-2","vh-end"],["pButton","","pRipple","","type","button","label","Valider",1,"p-button-raised","p-button-success",3,"disabled","click"],["header","S\xe9lection de la plage",3,"closable","visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"w-full","plage-interview-dialog"],[1,"mb-4","mt-5"],[1,"block","text-900","font-medium","mb-2"],["class","flex flex-wrap gap-3",4,"ngIf"],["pButton","","label","R\xe9initialiser","icon","pi pi-filter-slash",1,"p-button-outlined","mr-2",3,"click"],[2,"min-width","10rem"],[1,"flex","align-items-center"],["severity","danger","styleClass","ml-2  cursor-pointer",3,"value","click"],["severity","danger","styleClass","ml-2 cursor-pointer",3,"value","click"],["class","available-juries-title",4,"ngIf"],["optionLabel","name","placeholder","Choisir un intervenant",3,"tooltipPosition","options","filter","showClear","disabled","readonly","onChange"],["scrollHeight","250px","display","chip","optionLabel","label","placeholder","Choisir un candidat",3,"tooltipPosition","options","group","filter","showClear","onChange",4,"ngIf"],["type","text","pInputText","",3,"readOnly","disabled","ngModel"],[1,"available-juries-title"],["scrollHeight","250px","display","chip","optionLabel","label","placeholder","Choisir un candidat",3,"tooltipPosition","options","group","filter","showClear","onChange"],["pTemplate","group"],["colspan","3"],[1,"flex","flex-wrap","gap-3"],["styleClass","cursor-pointer tag-style basic-bg",3,"value","click",4,"ngFor","ngForOf"],["styleClass","cursor-pointer tag-style basic-bg",3,"value","click"]],template:function(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"section",0)(1,"h1",1),e._uU(2," Entretiens "),e._UZ(3,"i",2),e._uU(4," Plannifications des entretiens "),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"div",4),e.qZA(),e.TgZ(7,"h1",1),e._uU(8," Entretiens "),e._UZ(9,"i",2),e._uU(10," Planification des entretiens"),e.qZA(),e.TgZ(11,"div",3),e._UZ(12,"div",4),e.qZA(),e.TgZ(13,"div",5)(14,"div",6)(15,"div",7)(16,"div",8),e.NdJ("click",function(){e.CHM(n);const d=e.MAs(33);return s.previousDate(d)}),e._UZ(17,"i",9),e.qZA(),e.TgZ(18,"h3",10),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"div",8),e.NdJ("click",function(){e.CHM(n);const d=e.MAs(33);return s.nextDate(d)}),e._UZ(22,"i",2),e.qZA()(),e.TgZ(23,"div",11)(24,"div",12)(25,"p-dropdown",13),e.NdJ("ngModelChange",function(d){return s.selectedZone=d})("onChange",function(d){return s.onZoneChange(d)}),e.qZA()(),e.TgZ(26,"div",14)(27,"h3",15),e._uU(28,"Jury disponible"),e.qZA()(),e.TgZ(29,"div",16),e.YNc(30,N,7,2,"div",17),e.qZA()()()(),e.TgZ(31,"div",18)(32,"p-table",19,20),e.YNc(34,j,15,11,"ng-template",21),e.YNc(35,V,18,22,"ng-template",22),e.qZA()()()}2&t&&(e.xp6(19),e.hij(" ",e.Dn7(20,11,s.currentDay,"EEEE dd MMMM yyyy","fr")," "),e.xp6(6),e.Q6J("options",s.zonesList)("ngModel",s.selectedZone),e.xp6(5),e.Q6J("ngForOf",s.horaires),e.xp6(2),e.Q6J("value",s.juriesByDispo.get(s.activeHoraire)||e.DdM(15,A))("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(16,O))("loading",s.loading)("paginator",!0)("globalFilterFields",e.DdM(17,J)))},directives:[I.Lt,S.JJ,S.On,g.sg,E.V,P.iA,M.jx,F.Hq,g.O5,S.Fj,U.o,B.V],pipes:[g.uU],encapsulation:2}),a})()}];let te=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[f.Bz.forChild(ee)],f.Bz]}),a})(),ie=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[g.ez,te,E.W,I.kW,P.U$,F.hJ,U.j,S.u5,B.S]]}),a})()},62:(Z,x,u)=>{u.d(x,{v:()=>e});var g=u(9808),f=u(7587);let e=(()=>{class w{constructor(){}calculerJours(o,p){var i=Math.abs(p-o);return Math.floor(i/864e5)}clear(o){o.clear()}getStatuses(){return[{label:!1,value:"A faire"},{label:!0,value:"R\xe9alis\xe9"}]}getSeverity(o){switch(o){case!1:return"danger";case!0:return"success";default:return"warning"}}getStatusLabel(o){switch(o){case!1:return"A faire";case!0:return"R\xe9alis\xe9";default:return""}}getFormationLabel(o){return"Ing\xe9nieur g\xe9n\xe9raliste parcours international"==o?"OP":"Ing\xe9nieur g\xe9n\xe9raliste par apprentissage ou g\xe9nie des proc\xe9d\xe9s"==o?"L":"Ing\xe9nieur genie des proc\xe9d\xe9s"==o?"IP":"Ing\xe9nieur g\xe9neraliste parcours international et innovation"==o?"I":"Ing\xe9nieur g\xe9nie Informtique"==o?"X":""}genererDates(o,p){let i=this.calculerJours(o,p);console.log("nombre jour:",i);let c=[],C=new Date(o);c.push(new Date(o));for(let T=0;T<i;T++)C.setDate(C.getDate()+1),c.push(new Date(C));return c}formatDate(o){let i=(0,g.p6)(o,"shortTime","fr-FR").split(":");return parseInt(i[0],10)-1+"h"+i[1]}formatDate1(o){const p=new Date(o),T=(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours()),M=p.getMinutes();return p.setHours(T-1),p.setMinutes(M),p}buildDateWithTime(o){const p=new Date;return new Date(`${p.getFullYear()}-${p.getMonth()+1}-${p.getDate()} ${o}`)}buildDate(o,p){let c,C,i=p.split("-"),M=i[0].split("h");o.setHours(parseInt(M[0],10)+1),o.setMinutes(parseInt(M[1],10)),c=o.getTime();let S=i[1].split("h");return o.setHours(parseInt(S[0],10)+1),o.setMinutes(parseInt(S[1],10)),C=o.getTime(),{startDate:c,endDate:C}}}return w.\u0275fac=function(o){return new(o||w)},w.\u0275prov=f.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},8766:(Z,x,u)=>{u.d(x,{Y:()=>D});var g=u(2340),f=u(7587),e=u(520),w=u(4920);let D=(()=>{class o{constructor(i,c){this.http=i,this.baseUrlSvr=c,this.url="",this.url=`${this.baseUrlSvr.getOrigin()}${g.N.interviewPath}`,this.url+="note/"}allNotesEntretien(){return this.http.get(this.url+"allNotesEntretien")}downloadPlanningEntretien(){return this.http.get(this.url+"download/planningEntretiens",{responseType:"arraybuffer"})}downloadPlanningEntretienUrl(){return this.url+"download/planningEntretiens"}downloadNoteEntretienUrl(i,c){return this.url+"download/noteEntretiens/"+i+"/"+c}downloadNoteEntretienUrlFile(i,c){return this.http.get(this.url+"download/noteEntretiens/"+i+"/"+c,{responseType:"blob"})}liste(){return this.http.get(this.url+"all")}getOne(i){return this.http.get(this.url+i)}getByCandidatureId(i){return this.http.get(this.url+"notesEntretienByCandidature/"+i)}create(i){return this.http.post(this.url+"create",i)}update(i){return this.http.patch(this.url+(null==i?void 0:i.id),i)}delete(i){return this.http.delete(this.url+i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(e.eN),f.LFG(w.x))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},7755:(Z,x,u)=>{u.d(x,{b:()=>D});var g=u(2340),f=u(7587),e=u(520),w=u(4920);let D=(()=>{class o{constructor(i,c){this.http=i,this.baseUrlSvr=c,this.url="",this.url=`${this.baseUrlSvr.getOrigin()}${g.N.administrationPath}`,this.url+="zone/"}liste(){return this.http.get(this.url+"all")}getOne(i){return this.http.get(this.url+i)}create(i){return this.http.post(this.url+"create",i)}update(i){return this.http.patch(this.url+(null==i?void 0:i.id),i)}delete(i){return this.http.delete(this.url+i)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(e.eN),f.LFG(w.x))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},9142:(Z,x,u)=>{u.d(x,{V:()=>D,W:()=>o});var g=u(7587),f=u(9808);function e(p,i){if(1&p&&g._UZ(0,"span",3),2&p){const c=g.oxw();g.Q6J("ngClass",c.icon)}}const w=["*"];let D=(()=>{class p{containerClass(){return{"p-tag p-component":!0,"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}}}return p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=g.Xpm({type:p,selectors:[["p-tag"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",severity:"severity",value:"value",icon:"icon",rounded:"rounded"},ngContentSelectors:w,decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-value"],[1,"p-tag-icon",3,"ngClass"]],template:function(c,C){1&c&&(g.F$t(),g.TgZ(0,"span",0),g.Hsn(1),g.YNc(2,e,1,1,"span",1),g.TgZ(3,"span",2),g._uU(4),g.qZA()()),2&c&&(g.Tol(C.styleClass),g.Q6J("ngClass",C.containerClass())("ngStyle",C.style),g.xp6(2),g.Q6J("ngIf",C.icon),g.xp6(2),g.Oqu(C.value))},directives:[f.mk,f.PC,f.O5],styles:[".p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-value,.p-tag-icon.pi{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}\n"],encapsulation:2,changeDetection:0}),p})(),o=(()=>{class p{}return p.\u0275fac=function(c){return new(c||p)},p.\u0275mod=g.oAB({type:p}),p.\u0275inj=g.cJS({imports:[[f.ez]]}),p})()}}]);
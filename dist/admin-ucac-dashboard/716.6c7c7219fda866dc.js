"use strict";(self.webpackChunkadmin_ucac_dashboard=self.webpackChunkadmin_ucac_dashboard||[]).push([[716],{6716:(U,a,d)=>{d.r(a),d.d(a,{PeriodeEntretienModule:()=>q});var o=d(2382),l=d(9808),p=d(7671);class f{}var i=d(7587),c=d(7921),v=d(3322),g=d(9783);function b(e,s){if(1&e&&(i.TgZ(0,"option",23),i._uU(1),i.qZA()),2&e){const n=s.$implicit;i.Q6J("value",n.id),i.xp6(1),i.Oqu(n.nom)}}function _(e,s){1&e&&(i.TgZ(0,"div"),i._uU(1," Veuillez s'il vous plait entrer une valeur "),i.qZA())}function Z(e,s){if(1&e&&(i.TgZ(0,"div",24),i.YNc(1,_,2,0,"div",25),i.qZA()),2&e){const n=i.oxw();i.xp6(1),i.Q6J("ngIf",n.formDisponibilityControl.session_id.errors.required)}}function y(e,s){1&e&&(i.TgZ(0,"div"),i._uU(1," Veuillez s'il vous plait entrer une valeur "),i.qZA())}function C(e,s){if(1&e&&(i.TgZ(0,"div",24),i.YNc(1,y,2,0,"div",25),i.qZA()),2&e){const n=i.oxw();i.xp6(1),i.Q6J("ngIf",n.formDisponibilityControl.debut_disponibilite.errors.required)}}function E(e,s){1&e&&(i.TgZ(0,"div"),i._uU(1," Veuillez s'il vous plait entrer une valeur "),i.qZA())}function h(e,s){if(1&e&&(i.TgZ(0,"div",24),i.YNc(1,E,2,0,"div",25),i.qZA()),2&e){const n=i.oxw();i.xp6(1),i.Q6J("ngIf",n.formDisponibilityControl.fin_disponibilite.errors.required)}}const u=function(e){return{required:e}};let T=(()=>{class e{constructor(n,t,r){this.sessionSrv=n,this.disponibiliteService=t,this.messageService=r,this.loading=!0,this.sessions=[],this.formDisponibility=new o.cw({session_id:new o.NI("",[o.kI.required]),debut_disponibilite:new o.NI(null,[o.kI.required]),fin_disponibilite:new o.NI(null,[o.kI.required])})}ngOnInit(){this.getSessions()}get formDisponibilityControl(){return this.formDisponibility.controls}getSessions(){this.sessionSrv.liste().subscribe({next:n=>{this.sessions=n},error:n=>{console.log("error: ",n)}})}createDisponibility(){let n=Object.assign({},this.formDisponibility.value);delete n.session_id,n=Object.assign(Object.assign({},n),{session_id:parseInt(this.formDisponibility.value.session_id,10)});let t=this.sessions.find(r=>r.id==n.session_id);t&&(t.date_debut_entretien=this.formDisponibility.value.debut_disponibilite,t.date_fin_entretien=this.formDisponibility.value.fin_disponibilite,this.sessionSrv.updateForEntretien(Object.assign({},t)).subscribe({next:r=>{this.messageService.add({severity:"success",summary:"Modification de session",detail:"Modification de la p\xe9riode des entretiens effectu\xe9e avec success"}),this.disponibility=new f,this.formDisponibility.reset()},error:r=>{console.log("Error: ",r),this.messageService.add({severity:"error",summary:"Erreur de modification",detail:r.message})}}))}}return e.\u0275fac=function(n){return new(n||e)(i.Y36(c.K),i.Y36(v.T),i.Y36(g.ez))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-periode-entretien"]],decls:47,vars:16,consts:[[1,"session-page","page-content"],[1,"page-title"],[1,"pi","pi-angle-right"],[1,"card"],[1,"header"],[1,"title"],[1,"form",3,"formGroup","ngSubmit"],[2,"margin-bottom","1em","margin-left","3em"],[1,"line"],[1,"main"],[1,"row"],[1,"form-group"],["for",""],["formControlName","session_id",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","alert",4,"ngIf"],["type","date","formControlName","debut_disponibilite","id","",3,"ngClass"],["type","date","formControlName","fin_disponibilite","id","",3,"value","ngClass"],[1,"footer"],[1,"btn-group"],["type","submit",1,"btn","btn-info",3,"disabled"],[1,"btn","btn-danger",3,"click"],[3,"value"],[1,"alert"],[4,"ngIf"]],template:function(n,t){if(1&n&&(i.TgZ(0,"section",0)(1,"h1",1),i._uU(2,"Entretiens "),i._UZ(3,"i",2),i._uU(4," D\xe9finition p\xe9riode entretiens"),i.qZA(),i.TgZ(5,"div",3)(6,"div",4)(7,"h3",5),i._uU(8,"P\xe9riode des entretiens "),i.qZA()(),i.TgZ(9,"form",6),i.NdJ("ngSubmit",function(){return t.createDisponibility()}),i.TgZ(10,"div",4),i._uU(11," Veullez remplir les champs suivants "),i.TgZ(12,"ul",7)(13,"li"),i._uU(14," Date d\xe9but correspond \xe0 la date de d\xe9but des entretiens. "),i.qZA(),i.TgZ(15,"li"),i._uU(16," Date fin correspond \xe0 la date de fin des entretiens. "),i.qZA()(),i._UZ(17,"div",8),i.qZA(),i.TgZ(18,"div",9)(19,"div",10)(20,"div",11)(21,"label",12),i._uU(22,"Session *"),i.qZA(),i.TgZ(23,"select",13)(24,"option",14),i._uU(25,"Session d'entretion"),i.qZA(),i.YNc(26,b,2,2,"option",15),i.qZA()(),i.YNc(27,Z,2,1,"div",16),i.qZA(),i.TgZ(28,"div",10)(29,"div",11)(30,"label",12),i._uU(31,"Date de d\xe9but *"),i.qZA(),i._UZ(32,"input",17),i.qZA(),i.YNc(33,C,2,1,"div",16),i.qZA(),i.TgZ(34,"div",10)(35,"div",11)(36,"label",12),i._uU(37,"Date de fin *"),i.qZA(),i._UZ(38,"input",18),i.qZA(),i.YNc(39,h,2,1,"div",16),i.qZA()(),i.TgZ(40,"div",19),i._UZ(41,"div",8),i.TgZ(42,"div",20)(43,"button",21),i._uU(44," Soumettre "),i.qZA(),i.TgZ(45,"button",22),i.NdJ("click",function(){return t.formDisponibility.reset()}),i._uU(46," Renitialiser "),i.qZA()()()()()()),2&n){let r;i.xp6(9),i.Q6J("formGroup",t.formDisponibility),i.xp6(14),i.Q6J("ngClass",i.VKq(10,u,t.formDisponibility.get("session_id").invalid)),i.xp6(3),i.Q6J("ngForOf",t.sessions),i.xp6(1),i.Q6J("ngIf",t.formDisponibilityControl.session_id.errors),i.xp6(5),i.Q6J("ngClass",i.VKq(12,u,t.formDisponibility.get("debut_disponibilite").invalid)),i.xp6(1),i.Q6J("ngIf",t.formDisponibilityControl.debut_disponibilite.errors),i.xp6(5),i.Q6J("value",null==(r=t.formDisponibility.get("fin_disponibilite"))?null:r.value)("ngClass",i.VKq(14,u,t.formDisponibility.get("fin_disponibilite").invalid)),i.xp6(1),i.Q6J("ngIf",t.formDisponibilityControl.fin_disponibilite.errors),i.xp6(4),i.Q6J("disabled",t.formDisponibility.invalid)}},directives:[o._Y,o.JL,o.sg,o.EJ,o.JJ,o.u,l.mk,o.YN,o.Kr,l.sg,l.O5,o.Fj],encapsulation:2}),e})();var m=d(437);const D=[{path:"",component:T,canActivate:[m.u]}];let A=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[m.u],imports:[[p.Bz.forChild(D)],p.Bz]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[l.ez,A,o.u5,o.UX]]}),e})()}}]);
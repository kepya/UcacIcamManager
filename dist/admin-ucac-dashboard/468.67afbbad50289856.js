"use strict";(self.webpackChunkadmin_ucac_dashboard=self.webpackChunkadmin_ucac_dashboard||[]).push([[468],{9468:(B,g,s)=>{s.r(g),s.d(g,{CalendrierEntretienModule:()=>y});var l=s(9808),e=s(7587),v=s(8766),C=s(7212),Z=s(62),b=s(7921),h=s(4036),p=s(2382);function x(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().previousDate()}),e._uU(1," Precedent Date "),e.qZA()}}function A(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().prochaineDate()}),e._uU(1," Prochaine Date "),e.qZA()}}function T(n,o){if(1&n&&(e.TgZ(0,"h3",5),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.currentDate))}}function D(n,o){if(1&n&&(e.TgZ(0,"td",19)(1,"div"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.uIk("rowspan",i.entretiensBeforeBreak.length+1),e.xp6(2),e.Oqu(t.interviewer)}}function E(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,D,3,2,"td",18),e.qZA()),2&n){const t=o.$implicit,i=o.index;e.xp6(2),e.hij("",e.xi3(3,5,t.disponibility.debut_disponibilite,"H:mm")+" - "+e.xi3(4,8,t.disponibility.fin_disponibilite,"H:mm")," "),e.xp6(4),e.Oqu(t.centre),e.xp6(2),e.Oqu(t.candidat.compte.name),e.xp6(2),e.Oqu(t.candidat.compte.prenom),e.xp6(1),e.Q6J("ngIf",0==i)}}function w(n,o){if(1&n&&(e.TgZ(0,"td",19)(1,"div"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.uIk("rowspan",i.entretiensAfterBreak.length+1),e.xp6(2),e.Oqu(t.interviewer)}}function U(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,w,3,2,"td",18),e.qZA()),2&n){const t=o.$implicit,i=o.index;e.xp6(2),e.hij("",e.xi3(3,5,t.disponibility.debut_disponibilite,"H:mm")+" - "+e.xi3(4,8,t.disponibility.fin_disponibilite,"H:mm")," "),e.xp6(4),e.Oqu(t.centre),e.xp6(2),e.Oqu(t.candidat.compte.name),e.xp6(2),e.Oqu(t.candidat.compte.prenom),e.xp6(1),e.Q6J("ngIf",0==i)}}let _=(()=>{class n{constructor(t,i,a,r){this.noteService=t,this.compteDisponibiliteService=i,this.commonService=a,this.sessionSrv=r,this.interviewers=[],this.entretiensBeforeBreak=[],this.entretiensAfterBreak=[],this.datesOfEntretiens=[],this.indexCurrentDate=0}ngOnInit(){this.currentDate=new Date,this.getActiveSession(),this.getCompteDisponibilite()}getCompteDisponibilite(){this.compteDisponibiliteService.liste().subscribe({next:t=>{var i,a;let r=[];for(let d of t)r.push((null===(i=d.compte)||void 0===i?void 0:i.name)+" "+(null===(a=d.compte)||void 0===a?void 0:a.prenom));this.interviewers=[...new Set(r)]}})}getActiveSession(){this.sessionSrv.getActive().subscribe({next:t=>{let i=new Date(t.date_debut_entretien),a=new Date(t.date_fin_entretien);this.datesOfEntretiens=this.commonService.genererDates(i.getTime(),a.getTime()),this.indexCurrentDate=0,this.currentDate=this.datesOfEntretiens[this.indexCurrentDate]}})}handleInterviewerSelect(t){this.getEntretiens()}getEntretiens(){this.noteService.liste().subscribe({next:t=>{let i=t.filter(r=>{var d,c;return new Date(r.debut_entretien).getDate()===this.currentDate.getDate()&&(null===(d=r.compte)||void 0===d?void 0:d.name)+" "+(null===(c=r.compte)||void 0===c?void 0:c.prenom)===this.interviewer});i.sort((r,d)=>new Date(r.fin_entretien).getTime()-new Date(d.fin_entretien).getTime());let a=i.map(r=>{var d,c,m;return{centre:(null===(d=r.candidature)||void 0===d?void 0:d.centre)||"",interviewer:(null===(c=r.compte)||void 0===c?void 0:c.name)+" "+(null===(m=r.compte)||void 0===m?void 0:m.prenom),candidat:r.candidature,disponibility:{date_disponibilite:r.debut_entretien,debut_disponibilite:new Date(r.debut_entretien),fin_disponibilite:new Date(r.fin_entretien)}}});this.entretiensBeforeBreak=a.filter(r=>r.disponibility.fin_disponibilite.getHours()<=12),this.entretiensAfterBreak=a.filter(r=>r.disponibility.fin_disponibilite.getHours()>12)},error:t=>{console.log("error: ",t)}})}prochaineDate(){this.currentDate=this.datesOfEntretiens[this.indexCurrentDate+1],this.indexCurrentDate=this.indexCurrentDate+1,this.getEntretiens()}previousDate(){this.currentDate=this.datesOfEntretiens[this.indexCurrentDate-1],this.indexCurrentDate=this.indexCurrentDate-1,this.getEntretiens()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Y),e.Y36(C.R),e.Y36(Z.v),e.Y36(b.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-calendrier-entretien"]],decls:39,vars:8,consts:[[1,"calendrier-entretien-page","calendrier-page","page-content"],[1,"page-title"],[1,"pi","pi-angle-right"],[1,"card"],[1,"header"],[1,"title"],["placeholder","Choisir un intervenant",3,"options","showClear","ngModel","onChange","ngModelChange"],["class","btn btn-danger ml-1 mr-1",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"line"],[1,"sub-header"],["class","title",4,"ngIf"],[1,"calendrier"],["id","table"],[4,"ngFor","ngForOf"],["colspan","4",1,"pause"],[1,"btn","btn-danger","ml-1","mr-1",3,"click"],[1,"btn","btn-primary",3,"click"],["class","rowspan",4,"ngIf"],[1,"rowspan"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0)(1,"h1",1),e._uU(2," Entretiens "),e._UZ(3,"i",2),e._uU(4," Calendrier des entretiens"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"h3",5),e._uU(8,"Calendrier final des entretiens"),e.qZA(),e.TgZ(9,"div")(10,"p-dropdown",6),e.NdJ("onChange",function(r){return i.handleInterviewerSelect(r)})("ngModelChange",function(r){return i.interviewer=r}),e.qZA(),e.YNc(11,x,2,0,"button",7),e.YNc(12,A,2,0,"button",8),e.qZA()(),e._UZ(13,"div",9),e.TgZ(14,"div",10)(15,"h3",5),e._uU(16,"Entretiens concours Ucac-Icam"),e.qZA(),e.YNc(17,T,3,3,"h3",11),e.qZA(),e.TgZ(18,"div",12)(19,"table",13)(20,"thead")(21,"th"),e._uU(22,"Horaire"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Centre d'examen"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Noms"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Pr\xe9nom"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Intervenants"),e.qZA()(),e.TgZ(31,"tbody"),e.YNc(32,E,12,11,"tr",14),e.TgZ(33,"tr")(34,"td"),e._uU(35,"12h00 - 13h00"),e.qZA(),e.TgZ(36,"td",15),e._uU(37,"Pause"),e.qZA()(),e.YNc(38,U,12,11,"tr",14),e.qZA()()()()()),2&t&&(e.xp6(10),e.Q6J("options",i.interviewers)("showClear",!0)("ngModel",i.interviewer),e.xp6(1),e.Q6J("ngIf",i.datesOfEntretiens.length>1),e.xp6(1),e.Q6J("ngIf",i.datesOfEntretiens.length>1),e.xp6(5),e.Q6J("ngIf",i.currentDate),e.xp6(15),e.Q6J("ngForOf",i.entretiensBeforeBreak),e.xp6(6),e.Q6J("ngForOf",i.entretiensAfterBreak))},directives:[h.Lt,p.JJ,p.On,l.O5,l.sg],pipes:[l.uU],encapsulation:2}),n})();var f=s(7671),u=s(7618);const q=[{path:"",component:_,canActivate:[u.a]},{path:"**",component:_,canActivate:[u.a]}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[u.a],imports:[[f.Bz.forChild(q)],f.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.ez,O,p.u5,p.UX,h.kW]]}),n})()}}]);
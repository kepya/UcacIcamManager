"use strict";(self.webpackChunkadmin_ucac_dashboard=self.webpackChunkadmin_ucac_dashboard||[]).push([[467],{9930:(T,w,d)=>{d.d(w,{u:()=>D});var g=d(2340),f=d(7587),e=d(520),C=d(4920);let D=(()=>{class l{constructor(i,c){this.http=i,this.baseUrlSvr=c,this.url="",this.urlCodeTest="",this.urlSendEmail="",this.urlUploadImage="",this.url=`${this.baseUrlSvr.getOrigin()}${g.N.candidaturePath}`,this.urlCodeTest=this.url+"candidature/all-codes",this.urlUploadImage=this.url+"candidature/file/uploadFile",this.urlSendEmail=this.url+"email/send",this.url+="candidature/"}uploadImage(i,c){const b=new FormData;return b.append("file",i),this.http.post(this.urlUploadImage+c,b)}sendEmail(i){return this.http.post(this.urlSendEmail,i,{responseType:"text"})}addCandidature(i){return this.http.post(this.url,i)}allCodes(){return this.http.get(this.urlCodeTest)}liste(){return this.http.get(this.url+"candidats")}nonEntretenu(){return this.http.get(this.url+"candidats/nonEntretenus")}update(i,c){return this.http.patch(this.url+"candidats/update/"+i,c)}allByZone(i){return this.http.get(this.url+"allbyzone/"+i)}allSolvableByZone(i,c){return this.http.get(this.url+"allbysolvabilitezone/"+i+"/"+c)}allAdmissibleByZone(i){return this.http.get(this.url+"admissiblebyzone/"+i)}allAdmissByZone(i){return this.http.get(this.url+"admisbyzone/"+i)}allByCentre(i){return this.http.get(this.url+"allbycentreexamen/"+i)}allByParcours(i){return this.http.post(this.url+"filteredcandidats",{parcours:!0,cycle:!1,valeaurParcours:i,valeurCycle:"string"})}allByCycle(i){return this.http.post(this.url+"filteredcandidats",{parcours:!1,cycle:!0,valeaurParcours:"string",valeurCycle:i})}allByCycleAndParcours(i,c){return this.http.post(this.url+"filteredcandidats",{parcours:!0,cycle:!0,valeaurParcours:c,valeurCycle:i})}allSolvableByCentre(i,c){return this.http.get(this.url+"allbysolvabilitecentreexamen/"+i+"/"+c)}allAdmissibleByCentre(i){return this.http.get(this.url+"admissiblebycentreexamen/"+i)}allAdmissByCentre(i){return this.http.get(this.url+"admisbycentreexamen/"+i)}allBySite(i){return this.http.get(this.url+"allbysite/"+i)}allSolvableBySite(i,c){return this.http.get(this.url+"allbysolvabilitesite/"+i+"/"+c)}allAdmissibleBySite(i){return this.http.get(this.url+"admissiblebysite/"+i)}allAdmissBySite(i){return this.http.get(this.url+"admisbysite/"+i)}getOne(i){return this.http.get(this.url+i)}getStatistics(){return this.http.get(this.url+"statistics")}downloadCandidatureFile(){return this.http.get(this.url+"candidatures/download",{responseType:"blob"})}downloadCandidatureFileFor(i,c){return this.http.post(this.url+"filteredcandidats/download",{parcours:!0,cycle:!0,valeaurParcours:c,valeurCycle:i},{responseType:"blob"})}downloadAdmissibleCandidatureFile(){return this.http.get(this.url+"candidatures/download",{responseType:"blob"})}downloadAdmissibleCandidatureFileByZone(i){return this.http.get(this.url+"download/admissiblebyzone/"+i,{responseType:"blob"})}downloadAdmissibleCandidatureFileByCentre(i){return this.http.get(this.url+"download/admissiblebycentreexamen/"+i,{responseType:"blob"})}downloadAdmissibleCandidatureFileBySite(i){return this.http.get(this.url+"download/admissiblebysite/"+i,{responseType:"blob"})}downloadAdmissCandidatureFile(){return this.http.get(this.url+"candidatures/download",{responseType:"blob"})}downloadAdmisCandidatureFileByZone(i){return this.http.get(this.url+"download/admisbyzone/"+i,{responseType:"blob"})}downloadAdmisCandidatureFileByCentre(i){return this.http.get(this.url+"download/admisbycentreexamen/"+i,{responseType:"blob"})}downloadAdmisCandidatureFileBySite(i){return this.http.get(this.url+"download/admisbyste/"+i,{responseType:"blob"})}downloadSolvableCandidatureFile(i){return this.http.get(this.url+"download/allbysolvabilite/"+i,{responseType:"blob"})}delete(i){return this.http.delete(this.url+i)}}return l.\u0275fac=function(i){return new(i||l)(f.LFG(e.eN),f.LFG(C.x))},l.\u0275prov=f.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},2467:(T,w,d)=>{d.r(w),d.d(w,{ScheduleInterviewerModule:()=>V});var g=d(9808),f=d(7671),e=d(7587),C=d(3322),D=d(9930),l=d(7921),h=d(7755),i=d(9099),c=d(62),b=d(8766),x=d(7212),S=d(9783),Z=d(9142),M=d(4255),A=d(845),P=d(4036),I=d(2382),E=d(1424),F=d(5315);function O(r,_){if(1&r&&(e.TgZ(0,"li",36),e._UZ(1,"p-tag",37),e.TgZ(2,"span",38),e._uU(3),e.qZA()()),2&r){const t=_.$implicit,a=e.oxw(2);let n;e.xp6(1),e.s9C("value",null!==(n=null==(n=a.zones.get(t.idZone))?null:n.nom)&&void 0!==n?n:""),e.xp6(2),e.AsE("",t.name," ",t.prenom,"")}}function R(r,_){if(1&r&&(e.TgZ(0,"div",30)(1,"div",31)(2,"h4",32),e._uU(3),e.qZA()(),e.TgZ(4,"div",33)(5,"ul",34),e.YNc(6,O,4,3,"li",35),e.qZA()()()),2&r){const t=_.$implicit,a=e.oxw();e.xp6(3),e.Oqu(t),e.xp6(3),e.Q6J("ngForOf",a.juriesByDispo.get(t))}}function J(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"div",39)(1,"div")(2,"h2"),e._uU(3,"Nouvel entretien"),e.qZA(),e.TgZ(4,"h4",40),e._uU(5),e.ALo(6,"date"),e.qZA()(),e.TgZ(7,"div")(8,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.filterGroupedFormations=n.groupedFormations}),e.qZA(),e.TgZ(9,"span",42),e._UZ(10,"i",43),e.TgZ(11,"p-dropdown",44),e.NdJ("onChange",function(n){return e.CHM(t),e.oxw().handleFormationSelect(n)}),e.qZA()()()(),e.TgZ(12,"div",45),e._UZ(13,"p-tag",46),e.TgZ(14,"p-tag",47),e.NdJ("click",function(){return e.CHM(t),e.oxw().showMainDialog()}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(5),e.hij("Session de ",e.Dn7(6,7,null==t.session?null:t.session.date_examen,"MMMM","fr"),""),e.xp6(6),e.Q6J("tooltipPosition","top")("options",t.formations)("filter",!0)("showClear",!0)("showClear",!0),e.xp6(3),e.s9C("value",t.activeHoraire)}}function B(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"th")(2,"th",48),e.TgZ(3,"th",48)(4,"div",49),e._uU(5," Plage 1 "),e.TgZ(6,"p-tag",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.showDialog(n.firstPlages,1)}),e.qZA()()(),e.TgZ(7,"th",48)(8,"div",49),e._uU(9," Plage 2 "),e.TgZ(10,"p-tag",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.showDialog(n.secondPlages,2)}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("value",t.plage1),e.xp6(4),e.Q6J("value",t.plage2)}}function N(r,_){if(1&r&&(e.TgZ(0,"td",56)(1,"div"),e._uU(2," Jurys disponible "),e.qZA()()),2&r){const t=e.oxw().rowspan;e.uIk("rowspan",t)}}function L(r,_){if(1&r&&(e.TgZ(0,"div",49)(1,"span"),e._uU(2),e.qZA()()),2&r){const t=_.$implicit;e.xp6(2),e.Oqu(t.label)}}function j(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"p-dropdown",57),e.NdJ("onChange",function(n){e.CHM(t);const u=e.oxw().rowIndex,o=e.oxw();return o.handleCandidatSelect(n,o.plage1,u)}),e.YNc(1,L,3,1,"ng-template",58),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("tooltipPosition","top")("options",t.filterGroupedFormations)("group",!0)("filter",!0)("showClear",!0)}}const U=function(){return[]};function H(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,N,3,1,"td",52),e.TgZ(2,"td")(3,"p-dropdown",53),e.NdJ("onChange",function(n){const o=e.CHM(t).rowIndex;return e.oxw().handleInterviewerSelect(n,o)}),e.qZA()(),e.TgZ(4,"td"),e.YNc(5,j,2,5,"p-dropdown",54),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"input",55),e.qZA()()}if(2&r){const t=_.rowIndex,a=_.rowgroup,n=e.oxw();let u;e.xp6(1),e.Q6J("ngIf",a),e.xp6(2),e.Q6J("tooltipPosition","top")("options",n.getAvalaibleJury(n.juriesByDispo.get(n.activeHoraire)||e.DdM(12,U),n.activeHoraire))("filter",!0)("showClear",!0)("showClear",!0)("disabled","Selectionner"==n.plage1)("readonly","Selectionner"==n.plage1),e.xp6(2),e.Q6J("ngIf","Selectionner"!=n.plage1),e.xp6(2),e.Q6J("readOnly",!0)("disabled",!0)("ngModel",null==(u=n.selectCandidatMap.get(n.currentDay.getTime()+" - "+n.activeHoraire+" - "+t+" - "+n.plage2))?null:u.label)}}function Y(r,_){1&r&&(e.TgZ(0,"tr")(1,"td",59),e._uU(2,"Aucun jury disponible pour le moment."),e.qZA()())}function q(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"p-tag",62),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw(2).selectPlage(u)}),e.qZA()}2&r&&e.Q6J("value",_.$implicit)}function z(r,_){if(1&r&&(e.TgZ(0,"div",60),e.YNc(1,q,1,1,"p-tag",61),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectPlages)}}function Q(r,_){if(1&r){const t=e.EpF();e.TgZ(0,"p-tag",62),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw(2).selectMainPlage(u)}),e.qZA()}2&r&&e.Q6J("value",_.$implicit)}function $(r,_){if(1&r&&(e.TgZ(0,"div",60),e.YNc(1,Q,1,1,"p-tag",61),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.horaires)}}const W=function(){return[5,10,25,50]},k=function(){return["horaire"]},K=function(){return{width:"50vw"}},G=[{path:"",component:(()=>{class r{constructor(t,a,n,u,o,v,y,s,p,m){this.disponibilitySrv=t,this.candidatureSrv=a,this.sessionSrv=n,this.zoneService=u,this.compteSrv=o,this.commonService=v,this.noteService=y,this.compteDisponibiliteService=s,this.router=p,this.messageService=m,this.currentDay=new Date,this.visible=!1,this.canSave=!1,this.visibleMainPlage=!1,this.numberOfCandidatToInterview=0,this.selectCandidatMap=new Map,this.indexCurrentDate=0,this.datesOfEntretiens=[],this.noteRequests=[],this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.activeHoraire="Selectionner",this.plage1="Selectionner",this.plage2="Selectionner",this.plageRanking=0,this.selectPlages=[],this.firstPlages=["08h00 - 08h20","09h00 - 09h20","10h00 - 10h20","11h00 - 11h20"],this.secondPlages=["08h30 - 08h50","09h30 - 09h50","10h30 - 10h50","11h30 - 11h50"],this.formations=[{name:"Ing\xe9nieur g\xe9n\xe9raliste par apprentissage ou g\xe9nie des proc\xe9d\xe9s",code:"L"},{name:"Ing\xe9nieur g\xe9n\xe9raliste parcours international",code:"OP"},{name:"Ing\xe9nieur g\xe9neraliste parcours international et innovation",code:"I"},{name:"Ing\xe9nieur g\xe9nie Informatique",code:"X"}],this.juries=[{name:"",value:"",horaire:""},{name:"",value:"",horaire:""},{horaire:"",name:"",value:""}],this.horaires=[],this.disponibilities=[],this.loading=!1,this.test={label:"FA",items:[{label:"Minyemeck danielle",candidat:{id:27,centreExamenId:17,sessionId:1,langue:"Anglais",serie_bac:null,nom_parent1:null,nom_parent2:null,email_pere:null,telephone_pere:null,email_tuteur:null,telephone_tuteur:null,email_mere:null,telephone_mere:null,telephone_paiement:null,has_exchange:!1,formation_principal:null,datePaiement:null,statut:"Admis",solvable:!1,code_examen:"24",cycle:"second",diplome_universitaire:null,compte:{id:27,name:"Minyemeck",prenom:"danielle",password:"$2a$10$iyL5gzCHSQtqTRhUu.k8Q.yZ7e.W3sJRrs7ZNwB278BLRadnZ2e3q",email:"vassistanthub@gmail.com",telephone:"675272892",role:"CANDIDAT",id_disponibilite:0},centre:"Maroua",nombre_choix:1,candidatureActif:!0,formation1:"FA",formation2:"",formation3:"",paiement:"20 000 FCFA",reference_paiement:"DE33",image:"",genre:"F",nationalite:"Camerounaise",lieu_de_naissance:"Koyom",date_naissance:"2023-02-28",dernier_Etablissement:"Leti"}}]},this.candidats=[]}getAvalaibleJury(t,a){return t.map(n=>({name:n.name+" "+n.prenom,horaire:a,value:(n.id||0)+""}))}getCandidatures(){this.candidatureSrv.nonEntretenu().subscribe({next:t=>{t=t.filter(s=>1==s.solvable&&"Admissible"==s.statut),this.numberOfCandidatToInterview=t.length,console.log("result: ",this.numberOfCandidatToInterview),this.candidats=t,this.groupedFormations=[];let a=t.filter(s=>"FA"===s.formation1).map(s=>{var p,m;return{label:(null===(p=null==s?void 0:s.compte)||void 0===p?void 0:p.name)+" "+(null===(m=null==s?void 0:s.compte)||void 0===m?void 0:m.prenom),candidat:s}});a.length>0&&this.groupedFormations.push({label:"FA",items:a});let n=t.filter(s=>"IP"===s.formation1).map(s=>{var p,m;return{label:(null===(p=null==s?void 0:s.compte)||void 0===p?void 0:p.name)+" "+(null===(m=null==s?void 0:s.compte)||void 0===m?void 0:m.prenom),candidat:s}});n.length>0&&this.groupedFormations.push({label:"IP",items:n});let u=t.filter(s=>"I"===s.formation1).map(s=>{var p,m;return{label:(null===(p=null==s?void 0:s.compte)||void 0===p?void 0:p.name)+" "+(null===(m=null==s?void 0:s.compte)||void 0===m?void 0:m.prenom),candidat:s}});u.length>0&&this.groupedFormations.push({label:"I",items:u});let o=t.filter(s=>"X"===s.formation1).map(s=>{var p,m;return{label:(null===(p=null==s?void 0:s.compte)||void 0===p?void 0:p.name)+" "+(null===(m=null==s?void 0:s.compte)||void 0===m?void 0:m.prenom),candidat:s}});o.length>0&&this.groupedFormations.push({label:"X",items:o});let v=t.filter(s=>"L"===s.formation1).map(s=>{var p,m;return{label:(null===(p=null==s?void 0:s.compte)||void 0===p?void 0:p.name)+" "+(null===(m=null==s?void 0:s.compte)||void 0===m?void 0:m.prenom),candidat:s}});v.length>0&&this.groupedFormations.push({label:"L",items:v});let y=t.filter(s=>"OP"===s.formation1).map(s=>{var p,m;return{label:(null===(p=null==s?void 0:s.compte)||void 0===p?void 0:p.name)+" "+(null===(m=null==s?void 0:s.compte)||void 0===m?void 0:m.prenom),candidat:s}});y.length>0&&this.groupedFormations.push({label:"OP",items:y}),this.filterGroupedFormations=this.groupedFormations}})}ngOnInit(){this.zones=new Map,this.juriesByDispo=new Map,this.noteRequestMaps=new Map,this.selectCandidatMap=new Map,this.getActiveSession(),this.getDisponibilities(),this.getCandidatures()}showDialog(t,a){this.selectPlages=t,this.plageRanking=a,this.visible=!0}showMainDialog(){this.visibleMainPlage=!0,this.visible=!0}selectMainPlage(t){this.activeHoraire=t,this.alreadyUseCandidats=[],this.alreadyUseJuries=[],this.noteRequestMaps=new Map,this.selectCandidatMap=new Map,this.noteRequests=[],t.includes("08")||t.includes("09")?(this.firstPlages=["08h00 - 08h20","09h00 - 09h20","10h00 - 10h20","11h00 - 11h20"],this.secondPlages=["08h30 - 08h50","09h30 - 09h50","10h30 - 10h50","11h30 - 11h50"]):(this.firstPlages=["13h00 - 13h20","14h00 - 14h20","15h00 - 15h20","16h00 - 16h20"],this.secondPlages=["13h30 - 13h50","14h30 - 14h50","15h30 - 15h50","16h30 - 16h50"]),this.plage1="Selectionner",this.plage2="Selectionner",this.visible=!1,this.visibleMainPlage=!1}selectPlage(t){if(this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.noteRequests=[],this.noteRequestMaps=new Map,this.selectCandidatMap=new Map,1==this.plageRanking){let a=this.firstPlages.findIndex(n=>n==t);this.plage1=t,this.plage2=this.secondPlages[a]}else{let a=this.secondPlages.findIndex(n=>n==t);this.plage2=t,this.plage1=this.firstPlages[a]}this.visible=!1}getZones(){this.zoneService.liste().subscribe({next:t=>{for(let a=0;a<t.length;a++){const n=t[a];this.zones.set(n.id||0,n)}},error:t=>{console.log("error: ",t)}})}handleInterviewerSelect(t,a){let n=t.value;if(this.alreadyUseJuries.find(o=>o.id==parseInt(n.value)))this.messageService.add({severity:"error",summary:"Erreur d'assignation",detail:"Ce jury a d\xe9j\xe0 \xe9t\xe9 utilis\xe9 pour cette plage veuillez changer de jury"});else{let o=this.currentDay.getDate()+" - "+this.currentDay.getFullYear()+" - "+this.activeHoraire+" - "+a;if(this.noteRequestMaps.has(o)){console.log("test: ",this.noteRequestMaps.values());let v=this.noteRequestMaps.get(o);this.noteRequestMaps.set(o,{compteid:parseInt(n.value),candidatureid:v.candidatureid,debut_entretien:v.debut_entretien,fin_entretien:v.fin_entretien,commentaires:""})}else this.noteRequestMaps.set(o,{compteid:parseInt(n.value),candidatureid:0,debut_entretien:new Date,fin_entretien:new Date,commentaires:""});this.alreadyUseJuries.push({rowIndex:a,id:parseInt(n.value)})}this.randomizeCandidatDisplay()}handleFormationSelect(t){let a=t.value;this.filterGroupedFormations=this.groupedFormations.filter(n=>n.label==a.code)}getActiveSession(){this.sessionSrv.getActive().subscribe({next:t=>{this.session=t}})}handleCandidatSelect(t,a,n){let u=t.value;if(this.alreadyUseCandidats.find(v=>v.id==u.candidat.id))this.messageService.add({severity:"error",summary:"Erreur d'assignation",detail:"Ce candidat a d\xe9j\xe0 \xe9t\xe9 utilis\xe9 pour cette plage veuillez changer de candidat"});else{let v=this.currentDay.getDate()+" - "+this.currentDay.getFullYear()+" - "+this.activeHoraire+" - "+n;if(this.noteRequestMaps.has(v)){let y=this.noteRequestMaps.get(v),s=this.commonService.buildDate(this.currentDay,a);this.noteRequestMaps.set(v,{compteid:y.compteid,candidatureid:u.candidat.id||0,debut_entretien:new Date(s.startDate),fin_entretien:new Date(s.endDate),commentaires:""}),this.selectCandidatMap.set(v,{candidat:u.candidat,label:u.candidat.compte.name+" "+u.candidat.compte.prenom})}else{let y=this.commonService.buildDate(this.currentDay,a);this.noteRequestMaps.set(v,{compteid:0,candidatureid:u.candidat.id||0,debut_entretien:new Date(y.startDate),fin_entretien:new Date(y.endDate),commentaires:""}),this.selectCandidatMap.set(v,{candidat:u.candidat,label:u.candidat.compte.name+" "+u.candidat.compte.prenom})}this.alreadyUseCandidats.push({rowIndex:n,id:u.candidat.id||0})}this.randomizeCandidatDisplay()}getCandidat(t){let a=this.candidats.find(n=>n.id==(null==t?void 0:t.candidatureid));return a?{label:a.compte.name+" "+a.compte.prenom,candidat:a}:null}getJury(t){}randomizeCandidatDisplay(){let t=(this.juriesByDispo.get(this.activeHoraire)||[]).length;if(this.alreadyUseCandidats.length==t&&this.alreadyUseJuries.length==t||1==this.numberOfCandidatToInterview){for(let a=0;a<t;a++){let u=this.alreadyUseJuries[a],o=this.alreadyUseCandidats[a==t-1?0:a+1],v=this.commonService.buildDate(this.currentDay,this.plage2),y=this.currentDay.getTime()+" - "+this.activeHoraire+" - "+a+" - "+this.plage2;if(null==o?void 0:o.id){this.noteRequestMaps.set(y,{compteid:null==u?void 0:u.id,candidatureid:null==o?void 0:o.id,debut_entretien:new Date(v.startDate),fin_entretien:new Date(v.endDate),commentaires:""});let s=this.candidats.find(p=>p.id==(null==o?void 0:o.id));s&&this.selectCandidatMap.set(y,{candidat:s,label:s.compte.name+" "+s.compte.prenom})}}this.canSave=!0}}getDisponibilities(){this.disponibilitySrv.liste().subscribe({next:t=>{let a=[];this.disponibilities=t;for(let n=0;n<t.length;n++){const u=t[n];let o=new Date(u.date_disponibilite);o.setHours(0,0,0,0),a.findIndex(m=>m.getTime()==o.getTime())<=-1&&a.push(o);let p=this.commonService.formatDate(u.debut_disponibilite)+" - "+this.commonService.formatDate(u.fin_disponibilite);this.horaires.includes(p)||this.horaires.push(p)}this.datesOfEntretiens=[...new Set(a)],this.datesOfEntretiens.sort((n,u)=>n.getTime()-u.getTime()),this.indexCurrentDate=0,this.currentDay=this.datesOfEntretiens[this.indexCurrentDate],this.getCompteDisponibilite()},error:t=>{}})}getCompteDisponibilite(){this.juriesByDispo=new Map,this.compteDisponibiliteService.liste().subscribe({next:t=>{for(let a=0;a<t.length;a++){const n=t[a];let u=this.disponibilities.find(p=>p.id==n.disponibilite.id),y=this.commonService.formatDate(u.debut_disponibilite)+" - "+this.commonService.formatDate(u.fin_disponibilite),s=new Date(u.date_disponibilite);if(s.setHours(0,0,0,0),this.currentDay.getTime()==s.getTime())if(this.juriesByDispo.has(y)){let p=this.juriesByDispo.get(y);(null==p?void 0:p.find(ee=>ee.id==n.compte.id))||null==p||p.push(n.compte)}else this.juriesByDispo.set(y,[n.compte])}}})}previousDate(t){this.indexCurrentDate>0&&(this.indexCurrentDate=this.indexCurrentDate-1,this.currentDay=this.datesOfEntretiens[this.indexCurrentDate],this.activeHoraire="Selectionner",this.plage1="Selectionner",this.plage2="Selectionner",this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.noteRequests=[],this.noteRequestMaps=new Map,this.commonService.clear(t),this.getCompteDisponibilite())}nextDate(t){this.indexCurrentDate<this.datesOfEntretiens.length&&(this.indexCurrentDate=this.indexCurrentDate+1,this.currentDay=this.datesOfEntretiens[this.indexCurrentDate],this.activeHoraire="Selectionner",this.plage1="Selectionner",this.plage2="Selectionner",this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.noteRequests=[],this.noteRequestMaps=new Map,this.commonService.clear(t),this.getCompteDisponibilite())}validate(){let n=this.noteRequestMaps.values();for(let o of n)(null==o?void 0:o.candidatureid)&&(null==o?void 0:o.candidatureid)>0&&this.noteService.create(o).subscribe({next:v=>{this.loading=!1,this.selectCandidatMap=new Map,this.alreadyUseJuries=[],this.alreadyUseCandidats=[],this.noteRequests=[],this.noteRequestMaps=new Map,this.messageService.add({severity:"success",summary:"Assignation du jury pour entretien",detail:"Assignation du jury pour un entretien avec le candidat effectu\xe9e avec success pour la date du "+this.currentDay.toString()})},error:v=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Erreur d'assignation",detail:v.error.message})}});this.selectCandidatMap=new Map;let u=this.juriesByDispo.get(this.activeHoraire)||[];this.juriesByDispo.set(this.activeHoraire,[]),this.getCandidatures(),setTimeout(()=>{this.juriesByDispo.set(this.activeHoraire,u)},1e3)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.T),e.Y36(D.u),e.Y36(l.K),e.Y36(h.b),e.Y36(i.D),e.Y36(c.v),e.Y36(b.Y),e.Y36(x.R),e.Y36(f.F0),e.Y36(S.ez))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-schedule-interviewer"]],decls:39,vars:28,consts:[[1,"schedule-interviewer-page","calendrier-page","page-content"],[1,"page-title"],[1,"pi","pi-angle-right"],[1,"page-header"],[1,"line"],[1,"card","p-block-1"],[1,"main"],[1,"vh-center","gap-1","mb-3"],[1,"icon-btn-round","cursor-pointer",3,"click"],[1,"pi","pi-angle-left"],[1,"active-day"],[1,"jurys-plages"],[1,"vh-center","jurys-plages-title-content"],[1,"title"],[1,"grid"],["class","col-12 md:col-6",4,"ngFor","ngForOf"],[1,"card","mt-3"],["dataKey","id","currentPageReportTemplate","Pr\xe9sente {first} \xe0 {last} de {totalRecords} entr\xe9es","groupRowsBy","horaire","sortField","horaire","sortMode","single","rowGroupMode","rowspan",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"mt-2","vh-end"],["pButton","","pRipple","","type","button","label","Valider",1,"p-button-raised","p-button-success",3,"disabled","click"],["header","S\xe9lection de la plage",3,"closable","visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"w-full","plage-interview-dialog"],[1,"mb-4","mt-5"],[1,"block","text-900","font-medium","mb-2"],["class","flex flex-wrap gap-3",4,"ngIf"],[1,"col-12","md:col-6"],[1,"horaire-card-title"],[1,"title","text-center"],[1,"horaire-card-content"],[1,"list-none"],["class","text-base font-semibold v-center",4,"ngFor","ngForOf"],[1,"text-base","font-semibold","v-center"],[3,"value"],[1,"ml-2"],[1,"vh-space-between","flex","justify-content-between"],[1,"text-orange-500"],["pButton","","label","Reiniatialiser","icon","pi pi-filter-slash",1,"p-button-outlined","mr-2",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-filter-slash"],["optionLabel","name","placeholder","Filtrer par formation prioritaire",3,"tooltipPosition","options","filter","showClear","onChange"],[1,"vh-end","flex-wrap"],["severity","danger","value","Plage horaire :","styleClass","tag-style"],["severity","danger","styleClass","tag-style basic-bg cursor-pointer",3,"value","click"],[2,"min-width","10rem"],[1,"flex","align-items-center"],["severity","danger","styleClass","ml-2  cursor-pointer",3,"value","click"],["severity","danger","styleClass","ml-2 cursor-pointer",3,"value","click"],["class","available-juries-title",4,"ngIf"],["optionLabel","name","placeholder","Choisir un intervenant",3,"tooltipPosition","options","filter","showClear","disabled","readonly","onChange"],["scrollHeight","250px","display","chip","optionLabel","label","placeholder","Choisir un candidat",3,"tooltipPosition","options","group","filter","showClear","onChange",4,"ngIf"],["type","text","pInputText","",3,"readOnly","disabled","ngModel"],[1,"available-juries-title"],["scrollHeight","250px","display","chip","optionLabel","label","placeholder","Choisir un candidat",3,"tooltipPosition","options","group","filter","showClear","onChange"],["pTemplate","group"],["colspan","3"],[1,"flex","flex-wrap","gap-3"],["styleClass","cursor-pointer tag-style basic-bg",3,"value","click",4,"ngFor","ngForOf"],["styleClass","cursor-pointer tag-style basic-bg",3,"value","click"]],template:function(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"section",0)(1,"h1",1),e._uU(2," Entretiens "),e._UZ(3,"i",2),e._uU(4," Plannifications des entretiens"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"div",4),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e.NdJ("click",function(){e.CHM(n);const o=e.MAs(25);return a.previousDate(o)}),e._UZ(11,"i",9),e.qZA(),e.TgZ(12,"h3",10),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"div",8),e.NdJ("click",function(){e.CHM(n);const o=e.MAs(25);return a.nextDate(o)}),e._UZ(16,"i",2),e.qZA()(),e.TgZ(17,"div",11)(18,"div",12)(19,"h3",13),e._uU(20,"Jury disponible"),e.qZA()(),e.TgZ(21,"div",14),e.YNc(22,R,7,2,"div",15),e.qZA()()()(),e.TgZ(23,"div",16)(24,"p-table",17,18),e.YNc(26,J,15,11,"ng-template",19),e.YNc(27,B,11,2,"ng-template",20),e.YNc(28,H,8,13,"ng-template",21),e.YNc(29,Y,3,0,"ng-template",22),e.qZA(),e.TgZ(30,"div",23)(31,"button",24),e.NdJ("click",function(){return a.validate()}),e.qZA()()()(),e.TgZ(32,"p-dialog",25),e.NdJ("visibleChange",function(o){return a.visible=o}),e.TgZ(33,"div",26)(34,"div",27)(35,"label",28),e._uU(36,"Plages"),e.qZA(),e.YNc(37,z,2,1,"div",29),e.YNc(38,$,2,1,"div",29),e.qZA()()()}2&t&&(e.xp6(13),e.hij(" ",e.Dn7(14,20,a.currentDay,"EEEE dd MMMM yyyy","fr")," "),e.xp6(9),e.Q6J("ngForOf",a.horaires),e.xp6(2),e.Q6J("value",a.juriesByDispo.get(a.activeHoraire)||e.DdM(24,U))("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(25,W))("loading",a.loading)("paginator",!0)("globalFilterFields",e.DdM(26,k)),e.xp6(7),e.Q6J("disabled",!a.canSave),e.xp6(1),e.Akn(e.DdM(27,K)),e.Q6J("closable",!0)("visible",a.visible)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1),e.xp6(5),e.Q6J("ngIf",!a.visibleMainPlage),e.xp6(1),e.Q6J("ngIf",a.visibleMainPlage))},directives:[g.sg,Z.V,M.iA,S.jx,A.Hq,P.Lt,g.O5,I.Fj,E.o,I.JJ,I.On,F.V],pipes:[g.uU],encapsulation:2}),r})()}];let X=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.Bz.forChild(G)],f.Bz]}),r})(),V=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[g.ez,X,Z.W,P.kW,M.U$,A.hJ,E.j,I.u5,F.S]]}),r})()},62:(T,w,d)=>{d.d(w,{v:()=>e});var g=d(9808),f=d(7587);let e=(()=>{class C{constructor(){}calculerJours(l,h){var i=Math.abs(h-l);return Math.floor(i/864e5)}clear(l){l.clear()}getStatuses(){return[{label:!1,value:"A faire"},{label:!0,value:"R\xe9alis\xe9"}]}getSeverity(l){switch(l){case!1:return"danger";case!0:return"success";default:return"warning"}}getStatusLabel(l){switch(l){case!1:return"A faire";case!0:return"R\xe9alis\xe9";default:return""}}getFormationLabel(l){return"Ing\xe9nieur g\xe9n\xe9raliste parcours international"==l?"OP":"Ing\xe9nieur g\xe9n\xe9raliste par apprentissage ou g\xe9nie des proc\xe9d\xe9s"==l?"L":"Ing\xe9nieur genie des proc\xe9d\xe9s"==l?"IP":"Ing\xe9nieur g\xe9neraliste parcours international et innovation"==l?"I":"Ing\xe9nieur g\xe9nie Informtique"==l?"X":""}genererDates(l,h){let i=this.calculerJours(l,h);console.log("nombre jour:",i);let c=[],b=new Date(l);c.push(new Date(l));for(let x=0;x<i;x++)b.setDate(b.getDate()+1),c.push(new Date(b));return c}formatDate(l){let i=(0,g.p6)(l,"shortTime","fr-FR").split(":");return parseInt(i[0],10)-1+"h"+i[1]}buildDateWithTime(l){const h=new Date;return new Date(`${h.getFullYear()}-${h.getMonth()+1}-${h.getDate()} ${l}`)}buildDate(l,h){let c,b,i=h.split("-"),S=i[0].split("h");l.setHours(parseInt(S[0],10)+1),l.setMinutes(parseInt(S[1],10)),c=l.getTime();let M=i[1].split("h");return l.setHours(parseInt(M[0],10)+1),l.setMinutes(parseInt(M[1],10)),b=l.getTime(),{startDate:c,endDate:b}}}return C.\u0275fac=function(l){return new(l||C)},C.\u0275prov=f.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},8766:(T,w,d)=>{d.d(w,{Y:()=>D});var g=d(2340),f=d(7587),e=d(520),C=d(4920);let D=(()=>{class l{constructor(i,c){this.http=i,this.baseUrlSvr=c,this.url="",this.url=`${this.baseUrlSvr.getOrigin()}${g.N.interviewPath}`,this.url+="note/"}allNotesEntretien(){return this.http.get(this.url+"allNotesEntretien")}downloadPlanningEntretien(){return this.http.get(this.url+"download/planningEntretiens",{responseType:"arraybuffer"})}downloadPlanningEntretienUrl(){return this.url+"download/planningEntretiens"}liste(){return this.http.get(this.url+"all")}getOne(i){return this.http.get(this.url+i)}create(i){return this.http.post(this.url+"create",i)}update(i){return this.http.patch(this.url+(null==i?void 0:i.id),i)}delete(i){return this.http.delete(this.url+i)}}return l.\u0275fac=function(i){return new(i||l)(f.LFG(e.eN),f.LFG(C.x))},l.\u0275prov=f.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},7755:(T,w,d)=>{d.d(w,{b:()=>D});var g=d(2340),f=d(7587),e=d(520),C=d(4920);let D=(()=>{class l{constructor(i,c){this.http=i,this.baseUrlSvr=c,this.url="",this.url=`${this.baseUrlSvr.getOrigin()}${g.N.administrationPath}`,this.url+="zone/"}liste(){return this.http.get(this.url+"all")}getOne(i){return this.http.get(this.url+i)}create(i){return this.http.post(this.url+"create",i)}update(i){return this.http.patch(this.url+(null==i?void 0:i.id),i)}delete(i){return this.http.delete(this.url+i)}}return l.\u0275fac=function(i){return new(i||l)(f.LFG(e.eN),f.LFG(C.x))},l.\u0275prov=f.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},9142:(T,w,d)=>{d.d(w,{V:()=>D,W:()=>l});var g=d(7587),f=d(9808);function e(h,i){if(1&h&&g._UZ(0,"span",3),2&h){const c=g.oxw();g.Q6J("ngClass",c.icon)}}const C=["*"];let D=(()=>{class h{containerClass(){return{"p-tag p-component":!0,"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275cmp=g.Xpm({type:h,selectors:[["p-tag"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",severity:"severity",value:"value",icon:"icon",rounded:"rounded"},ngContentSelectors:C,decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-value"],[1,"p-tag-icon",3,"ngClass"]],template:function(c,b){1&c&&(g.F$t(),g.TgZ(0,"span",0),g.Hsn(1),g.YNc(2,e,1,1,"span",1),g.TgZ(3,"span",2),g._uU(4),g.qZA()()),2&c&&(g.Tol(b.styleClass),g.Q6J("ngClass",b.containerClass())("ngStyle",b.style),g.xp6(2),g.Q6J("ngIf",b.icon),g.xp6(2),g.Oqu(b.value))},directives:[f.mk,f.PC,f.O5],styles:[".p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-value,.p-tag-icon.pi{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}\n"],encapsulation:2,changeDetection:0}),h})(),l=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=g.oAB({type:h}),h.\u0275inj=g.cJS({imports:[[f.ez]]}),h})()}}]);
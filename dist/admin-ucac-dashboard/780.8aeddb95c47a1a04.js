"use strict";(self.webpackChunkadmin_ucac_dashboard=self.webpackChunkadmin_ucac_dashboard||[]).push([[780],{780:(Q,m,c)=>{c.r(m),c.d(m,{GestionMatiereModule:()=>k});var l=c(9808),f=c(7671),u=c(5193);class _{}var s=c(2382),e=c(7587),g=c(1242),v=c(1303),h=c(9783);function M(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"button",29),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).showUpdateMatterView(o)}),e.TgZ(9,"div"),e._UZ(10,"i",30),e.qZA(),e.TgZ(11,"span"),e._uU(12," Modifier "),e.qZA()(),e.TgZ(13,"button",31),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw(2).deleteMatter(o.id||0)}),e.TgZ(14,"div"),e._UZ(15,"i",32),e.qZA(),e.TgZ(16,"span"),e._uU(17," Supprimer "),e.qZA()()()()}if(2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.intitule),e.xp6(2),e.hij("",t.duree," H"),e.xp6(2),e.Oqu(t.coefficient)}}function x(i,a){1&i&&(e.TgZ(0,"tr")(1,"td",33)(2,"span",34),e._uU(3," Aucune mati\xe8re trouv\xe9es avec ces elements de recherche "),e.qZA()()())}function Z(i,a){1&i&&(e.TgZ(0,"tr")(1,"td",33)(2,"span",34),e._uU(3," Aucune mati\xe8re presentent dans la base "),e.qZA()()())}function C(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",35)(1,"a",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).previous()}),e._uU(2,"Pr\xe9cedent"),e.qZA()()}}function A(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",37)(1,"a",38),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).next()}),e._uU(2,"Suivant"),e.qZA()()}}const d=function(i){return{bold:i}};function T(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"section",2)(1,"h1",3),e._uU(2," Concours "),e._UZ(3,"i",4),e._uU(4," Mati\xe8res concours"),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"h3",7),e._uU(8,"Liste des mati\xe8res"),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().viewMatter("add")}),e._uU(10," Ajouter une mati\xe8re "),e.qZA()(),e._UZ(11,"div",9),e.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"span"),e._uU(16,"Voir"),e.qZA(),e.TgZ(17,"select",13),e.NdJ("change",function(n){return e.CHM(t),e.oxw().handlePageSize(n)})("ngModelChange",function(n){return e.CHM(t),e.oxw().pageSize=n}),e.TgZ(18,"option",14),e._uU(19,"10"),e.qZA(),e.TgZ(20,"option",15),e._uU(21,"25"),e.qZA(),e.TgZ(22,"option",16),e._uU(23,"50"),e.qZA(),e.TgZ(24,"option",17),e._uU(25,"100"),e.qZA()(),e.TgZ(26,"span"),e._uU(27,"entr\xe9es"),e.qZA()()(),e.TgZ(28,"div",18)(29,"table",19)(30,"tr")(31,"th")(32,"div"),e._uU(33," Intitule "),e.TgZ(34,"i",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().sort("intitule")}),e.qZA()()(),e.TgZ(35,"th")(36,"div"),e._uU(37," Duree "),e.TgZ(38,"i",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().sort("duree")}),e.qZA()()(),e.TgZ(39,"th")(40,"div"),e._uU(41," Coefficient "),e.TgZ(42,"i",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().sort("coefficient")}),e.qZA()()(),e.TgZ(43,"th")(44,"div"),e._uU(45," # "),e.qZA()()(),e.YNc(46,M,18,3,"tr",21),e.YNc(47,x,4,0,"tr",22),e.YNc(48,Z,4,0,"tr",22),e.qZA()(),e.TgZ(49,"div",23)(50,"span"),e._uU(51),e.qZA(),e.TgZ(52,"ul",24),e.YNc(53,C,3,0,"li",25),e.TgZ(54,"li",26)(55,"a",27),e._uU(56,"1"),e.qZA()(),e.YNc(57,A,3,0,"li",28),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(17),e.Q6J("ngModel",t.pageSize),e.xp6(17),e.Gre("icon-sort ","intitule"==t.sortProperty?t.sortIcon:t.downUpIcon,""),e.Q6J("ngClass",e.VKq(21,d,"intitule"==t.sortProperty)),e.xp6(4),e.Gre("icon-sort ","duree"==t.sortProperty?t.sortIcon:t.downUpIcon,""),e.Q6J("ngClass",e.VKq(23,d,"duree"==t.sortProperty)),e.xp6(4),e.Gre("icon-sort ","coefficient"==t.sortProperty?t.sortIcon:t.downUpIcon,""),e.Q6J("ngClass",e.VKq(25,d,"coefficient"==t.sortProperty)),e.xp6(4),e.Q6J("ngForOf",t.matters),e.xp6(1),e.Q6J("ngIf",t.searchValue&&0===t.matters.length),e.xp6(1),e.Q6J("ngIf",!t.searchValue&&0===t.matters.length),e.xp6(3),e.lnq("Page ",t.page," sur ",t.nbrOfPage,", avec ",t.matters.length," entr\xe9es affich\xe9es"),e.xp6(2),e.Q6J("ngIf",t.page>1),e.xp6(4),e.Q6J("ngIf",t.page<t.nbrOfPage)}}function U(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," Veuillez s'il vous plait entrer une valeur "),e.qZA())}function b(i,a){if(1&i&&(e.TgZ(0,"div",53),e.YNc(1,U,2,0,"div",22),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formMatterControl.intitule.errors.required)}}function q(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," Veuillez s'il vous plait entrer une valeur "),e.qZA())}function w(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," La dur\xe9e doit \xeatre sup\xe9rieur \xe0 zero "),e.qZA())}function G(i,a){if(1&i&&(e.TgZ(0,"div",53),e.YNc(1,q,2,0,"div",22),e.YNc(2,w,2,0,"div",22),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formMatterControl.duree.errors.required),e.xp6(1),e.Q6J("ngIf",t.formMatterControl.duree.errors.min)}}function J(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," Veuillez s'il vous plait entrer une valeur "),e.qZA())}function I(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," Le coefficient doit \xeatre sup\xe9rieur \xe0 zero "),e.qZA())}function S(i,a){if(1&i&&(e.TgZ(0,"div",53),e.YNc(1,J,2,0,"div",22),e.YNc(2,I,2,0,"div",22),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formMatterControl.coefficient.errors.required),e.xp6(1),e.Q6J("ngIf",t.formMatterControl.coefficient.errors.min)}}const p=function(i){return{required:i}};function N(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"section",39)(1,"h1",3)(2,"img",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().viewMatter()}),e.qZA(),e._uU(3," Mati\xe8re d'examen "),e._UZ(4,"i",4),e._uU(5),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"h3",7),e._uU(9),e.qZA()(),e._UZ(10,"div",9),e.TgZ(11,"form",41),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().createOrUpdateMatter()}),e.TgZ(12,"div",6),e._uU(13," Veullez remplir les champs suivants "),e._UZ(14,"div",9),e.qZA(),e.TgZ(15,"div",42)(16,"div",18)(17,"div",43)(18,"label",44),e._uU(19,"Intitule *"),e.qZA(),e._UZ(20,"input",45),e.qZA(),e.YNc(21,b,2,1,"div",46),e.qZA(),e.TgZ(22,"div",18)(23,"div",43)(24,"label",44),e._uU(25,"Duree *"),e.qZA(),e._UZ(26,"input",47),e.qZA(),e.YNc(27,G,3,2,"div",46),e.qZA(),e.TgZ(28,"div",18)(29,"div",43)(30,"label",44),e._uU(31,"Coefficient *"),e.qZA(),e._UZ(32,"input",48),e.qZA(),e.YNc(33,S,3,2,"div",46),e.qZA()(),e.TgZ(34,"div",49),e._UZ(35,"div",9),e.TgZ(36,"div",50)(37,"button",51),e.NdJ("click",function(){return e.CHM(t),e.oxw().createOrUpdateMatter()}),e._uU(38," Soumettre "),e.qZA(),e.TgZ(39,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw().formMatter.reset()}),e._uU(40," Renitialiser "),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.hij("",null!=t.matter&&t.matter.id?"Modifier":"Ajouter"," une mati\xe8re"),e.xp6(4),e.hij("",null!=t.matter&&t.matter.id?"Modifier":"Ajouter"," une mati\xe8re "),e.xp6(2),e.Q6J("formGroup",t.formMatter),e.xp6(9),e.Q6J("ngClass",e.VKq(10,p,t.formMatter.get("intitule").invalid)),e.xp6(1),e.Q6J("ngIf",t.formMatterControl.intitule.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(12,p,t.formMatter.get("duree").invalid)),e.xp6(1),e.Q6J("ngIf",t.formMatterControl.duree.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(14,p,t.formMatter.get("coefficient").invalid)),e.xp6(1),e.Q6J("ngIf",t.formMatterControl.coefficient.errors),e.xp6(4),e.Q6J("disabled",t.formMatter.invalid)}}const y=[{path:"",component:(()=>{class i{constructor(t,r,n){this.matterService=t,this.storageService=r,this.messageService=n,this.matters=[],this.matterCycleParcours=[],this.searchMatters=[],this.loading=!0,this.isJury=!1,this.isSuperAdmin=!1,this.isAdmin=!1,this.formMatter=new s.cw({intitule:new s.NI("",[s.kI.required]),duree:new s.NI(0,[s.kI.required,s.kI.min(1)]),coefficient:new s.NI(0,[s.kI.required,s.kI.min(1)])})}get formMatterControl(){return this.formMatter.controls}ngOnInit(){this.sortProperty="horaire",this.sortIcon="fa-solid fa-arrow-down-short-wide",this.downUpIcon="pi pi-sort-alt",this.pageSize=10,this.page=1,this.compte=this.storageService.getUserConnected(),this.isJury=this.compte.role==u.u.JURY,this.isAdmin=this.compte.role==u.u.ADMIN,this.isSuperAdmin=this.compte.role==u.u.SUPER_ADMIN,this.getAllMatters()}handlePageSize(t){this.page=1,this.getAllMatters()}sort(t,r=this.matters){return this.sortProperty=t,this.isAsc=!this.isAsc,this.sortIcon=this.isAsc?"fa-solid fa-arrow-down-short-wide":"fa-solid fa-arrow-down-wide-short","duree"===t&&r.sort(this.isAsc?(n,o)=>n.duree>o.duree?1:o.duree>n.duree?-1:0:(n,o)=>n.duree>o.duree?-1:o.duree>n.duree?1:0),"coefficient"===t&&r.sort(this.isAsc?(n,o)=>n.coefficient>o.coefficient?1:o.coefficient>n.coefficient?-1:0:(n,o)=>n.coefficient>o.coefficient?-1:o.coefficient>n.coefficient?1:0),"intitule"===t&&r.sort(this.isAsc?(n,o)=>n.intitule>o.intitule?1:o.intitule>n.intitule?-1:0:(n,o)=>n.intitule>o.intitule?-1:o.intitule>n.intitule?1:0),r}viewMatter(t="data"){"data"===t?(this.matter=new _,this.isFormMatter=!1):this.isFormMatter=!0}showUpdateMatterView(t){this.matter=t,this.viewMatter("update")}createOrUpdateMatter(){var t;(null===(t=this.matter)||void 0===t?void 0:t.id)?(this.matter.coefficient=parseInt(this.formMatter.value.coefficient,10),this.matter.duree=parseInt(this.formMatter.value.duree,10),this.matter.intitule=this.formMatter.value.intitule,this.matterService.update(Object.assign({},this.matter)).subscribe({next:r=>{this.getAllMatters(),this.matter=new _,this.formMatter.reset(),this.isFormMatter=!1,this.messageService.add({severity:"success",summary:"Modification de la mati\xe8re",detail:"Modification de la mati\xe8re des \xe9valuations effectu\xe9e avec success"})},error:r=>{this.messageService.add({severity:"error",summary:"Erreur de modification",detail:r.message}),console.log("Error: ",r)}})):this.matterService.create(Object.assign({},this.formMatter.value)).subscribe({next:r=>{this.getAllMatters(),this.matter=new _,this.formMatter.reset(),this.isFormMatter=!1,this.messageService.add({severity:"success",summary:"Cr\xe9ation de la mati\xe8re",detail:"Cr\xe9ation de la mati\xe8re des \xe9valuations effectu\xe9e avec success"})},error:r=>{this.messageService.add({severity:"error",summary:"Erreur de cr\xe9ation",detail:r.message}),console.log("Error: ",r)}})}getAllMatters(){this.matterService.liste().subscribe({next:t=>{t=this.sort("intitule",t),this.searchMatters=[],this.searchMatters=t,this.matters=t.map((r,n)=>Object.assign({id:n+1},r)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.collectionSize=t.length,this.nbrOfPage=Math.ceil(t.length/this.pageSize)}})}getAllMattersCyleParcours(){this.matterService.listeByCyleParcours().subscribe({next:t=>{this.matterCycleParcours=t}})}next(){this.page++,this.getAllMatters()}previous(){this.page--,this.getAllMatters()}deleteMatter(t){this.matterService.delete(t||0).subscribe({next:r=>{this.getAllMatters(),this.messageService.add({severity:"success",summary:"Suppression de mati\xe8re",detail:"Suppression effectu\xe9e avec success"})},error:r=>{console.log("Error: ",r),this.messageService.add({severity:"error",summary:"Erreur de suppression",detail:r.message})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.B),e.Y36(v.V),e.Y36(h.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gestion-matiere"]],decls:3,vars:2,consts:[["class","note-page page-content",4,"ngIf","ngIfElse"],["addMatter",""],[1,"note-page","page-content"],[1,"page-title"],[1,"pi","pi-angle-right"],[1,"card"],[1,"header"],[1,"title"],[1,"btn","btn-danger","ml-1","mr-1",3,"click"],[1,"line"],[1,"table-content"],[1,"search-content"],[1,"select-page-size"],["name","page-size","id","page-size",3,"ngModel","change","ngModelChange"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"row"],["id","table"],[3,"ngClass","click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pagination_content"],[1,"pagination"],["class","paginate_button previous disabled","id","datatable-responsive_previous",4,"ngIf"],[1,"paginate_button","active"],["aria-controls","datatable-responsive","data-dt-idx","1","tabindex","0"],["class","paginate_button next disabled","id","datatable-responsive_next",4,"ngIf"],[1,"btn",3,"click"],[1,"fa-solid","fa-pencil"],[1,"btn","mt-2",3,"click"],[1,"fa-solid","fa-trash"],["colspan","7"],[1,"vh-center"],["id","datatable-responsive_previous",1,"paginate_button","previous","disabled"],["aria-controls","datatable-responsive","data-dt-idx","0","tabindex","0",3,"click"],["id","datatable-responsive_next",1,"paginate_button","next","disabled"],["aria-controls","datatable-responsive","data-dt-idx","2","tabindex","0",3,"click"],[1,"Matter-page","page-content"],["src","/assets/icons/undo-outline.svg","alt","","srcset","",1,"icon",3,"click"],[1,"form",3,"formGroup","ngSubmit"],[1,"main"],[1,"form-group"],["for",""],["type","text","formControlName","intitule",3,"ngClass"],["class","alert",4,"ngIf"],["type","number","formControlName","duree",3,"ngClass"],["type","number","formControlName","coefficient",3,"ngClass"],[1,"footer"],[1,"btn-group"],["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"btn","btn-danger",3,"click"],[1,"alert"]],template:function(t,r){if(1&t&&(e.YNc(0,T,58,27,"section",0),e.YNc(1,N,41,16,"ng-template",null,1,e.W1O)),2&t){const n=e.MAs(2);e.Q6J("ngIf",!r.isFormMatter)("ngIfElse",n)}},directives:[l.O5,s.EJ,s.JJ,s.On,s.YN,s.Kr,l.mk,l.sg,s._Y,s.JL,s.sg,s.Fj,s.u,s.wV],encapsulation:2}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[f.Bz.forChild(y)],f.Bz]}),i})(),k=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[l.ez,E,s.u5,s.UX]]}),i})()}}]);
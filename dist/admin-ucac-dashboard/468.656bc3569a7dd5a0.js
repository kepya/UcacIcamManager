"use strict";(self.webpackChunkadmin_ucac_dashboard=self.webpackChunkadmin_ucac_dashboard||[]).push([[468],{9468:(A,w,a)=>{a.r(w),a.d(w,{CalendrierEntretienModule:()=>L});var f=a(9808),v=a(5193),e=a(7587),m=a(8766),E=a(1303),i=a(7212),d=a(62),o=a(7921),u=a(845),_=a(4119),x=a(4036),C=a(2382);function Z(n,c){1&n&&e._UZ(0,"i",21)}function D(n,c){1&n&&e._UZ(0,"i",22)}function O(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"span",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().showAllInterviewer()}),e.YNc(1,Z,1,0,"i",19),e.YNc(2,D,1,0,"i",20),e._uU(3," Visualisation pour l'ensemble des intervenants "),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showForAllInterviwer),e.xp6(1),e.Q6J("ngIf",!t.showForAllInterviwer)}}function M(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"p-dropdown",23),e.NdJ("onChange",function(l){return e.CHM(t),e.oxw().handleInterviewerSelect(l)})("ngModelChange",function(l){return e.CHM(t),e.oxw().interviewer=l}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("options",t.interviewers)("showClear",!0)("ngModel",t.interviewer)}}function J(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().previousDate()}),e._uU(1," Precedent Date "),e.qZA()}}function S(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().prochaineDate()}),e._uU(1," Prochaine Date "),e.qZA()}}function y(n,c){if(1&n&&(e.TgZ(0,"h3",6),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.currentDate))}}function F(n,c){if(1&n&&(e.TgZ(0,"td",28)(1,"div"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit,r=e.oxw();e.uIk("rowspan",r.entretiensBeforeBreak.length+1),e.xp6(2),e.Oqu(t.interviewer)}}function B(n,c){if(1&n&&(e.TgZ(0,"td")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.interviewer)}}function Y(n,c){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,F,3,2,"td",26),e.YNc(12,B,3,1,"td",27),e.qZA()),2&n){const t=c.$implicit,r=c.index,l=e.oxw();e.xp6(2),e.hij("",e.xi3(3,6,t.disponibility.debut_disponibilite,"H:mm")+" - "+e.xi3(4,9,t.disponibility.fin_disponibilite,"H:mm")," "),e.xp6(4),e.Oqu(t.centre),e.xp6(2),e.Oqu(t.candidat.compte.name),e.xp6(2),e.Oqu(t.candidat.compte.prenom),e.xp6(1),e.Q6J("ngIf",0==r&&!l.showForAllInterviwer),e.xp6(1),e.Q6J("ngIf",l.showForAllInterviwer)}}function N(n,c){if(1&n&&(e.TgZ(0,"td",28)(1,"div"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit,r=e.oxw();e.uIk("rowspan",r.entretiensAfterBreak.length+1),e.xp6(2),e.Oqu(t.interviewer)}}function P(n,c){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,N,3,2,"td",26),e.qZA()),2&n){const t=c.$implicit,r=c.index;e.xp6(2),e.hij("",e.xi3(3,5,t.disponibility.debut_disponibilite,"H:mm")+" - "+e.xi3(4,8,t.disponibility.fin_disponibilite,"H:mm")," "),e.xp6(4),e.Oqu(t.centre),e.xp6(2),e.Oqu(t.candidat.compte.name),e.xp6(2),e.Oqu(t.candidat.compte.prenom),e.xp6(1),e.Q6J("ngIf",0==r)}}let I=(()=>{class n{constructor(t,r,l,g,s){this.noteService=t,this.storageService=r,this.compteDisponibiliteService=l,this.commonService=g,this.sessionSrv=s,this.interviewers=[],this.entretiensBeforeBreak=[],this.entretiensAfterBreak=[],this.datesOfEntretiens=[],this.indexCurrentDate=0,this.showForAllInterviwer=!1}ngOnInit(){this.currentDate=new Date,this.getActiveSession(),this.compte=this.storageService.getUserConnected(),this.interviewer=this.compte.name+" "+this.compte.prenom,this.compte.role==v.u.JURY&&this.getEntretiens(),this.getCompteDisponibilite()}downloadPlanningEntretien(){window.open(this.noteService.downloadPlanningEntretienUrl(),"_blank")}showAllInterviewer(){this.showForAllInterviwer?(this.entretiensBeforeBreak=[],this.entretiensAfterBreak=[],this.showForAllInterviwer=!1):(this.showForAllInterviwer=!0,this.getEntretiens())}getCompteDisponibilite(){this.compteDisponibiliteService.liste().subscribe({next:t=>{var r,l;let g=[];for(let s of t)g.push((null===(r=s.compte)||void 0===r?void 0:r.name)+" "+(null===(l=s.compte)||void 0===l?void 0:l.prenom));this.interviewers=[...new Set(g)]}})}getActiveSession(){this.sessionSrv.getActive().subscribe({next:t=>{let r=new Date(t.date_debut_entretien),l=new Date(t.date_fin_entretien);this.datesOfEntretiens=this.commonService.genererDates(r.getTime(),l.getTime()),this.indexCurrentDate=0,this.currentDate=this.datesOfEntretiens[this.indexCurrentDate]}})}handleInterviewerSelect(t){this.showForAllInterviwer=!1,this.getEntretiens(t.value)}getEntretiens(t){this.noteService.liste().subscribe({next:r=>{let l=[];l=r.filter(null!=t?s=>{var p,h;return new Date(s.debut_entretien).getDate()===this.currentDate.getDate()&&(null===(p=s.compte)||void 0===p?void 0:p.name)+" "+(null===(h=s.compte)||void 0===h?void 0:h.prenom)===t}:this.compte.role==v.u.JURY?s=>{var p,h;return new Date(s.debut_entretien).getDate()===this.currentDate.getDate()&&(null===(p=s.compte)||void 0===p?void 0:p.name)+" "+(null===(h=s.compte)||void 0===h?void 0:h.prenom)===this.interviewer}:s=>new Date(s.debut_entretien).getDate()===this.currentDate.getDate()),l.sort((s,p)=>new Date(s.fin_entretien).getTime()-new Date(p.fin_entretien).getTime());let g=l.map(s=>{var p,h,T;return{centre:(null===(p=s.candidature)||void 0===p?void 0:p.centre)||"",interviewer:(null===(h=s.compte)||void 0===h?void 0:h.name)+" "+(null===(T=s.compte)||void 0===T?void 0:T.prenom),candidat:s.candidature,disponibility:{date_disponibilite:s.debut_entretien,debut_disponibilite:new Date(s.debut_entretien),fin_disponibilite:new Date(s.fin_entretien)}}});this.entretiensBeforeBreak=g.filter(s=>s.disponibility.fin_disponibilite.getHours()<=12),this.entretiensAfterBreak=g.filter(s=>s.disponibility.fin_disponibilite.getHours()>12)},error:r=>{console.log("error: ",r)}})}prochaineDate(){this.indexCurrentDate<this.datesOfEntretiens.length&&(this.indexCurrentDate=this.indexCurrentDate>this.datesOfEntretiens.length?this.datesOfEntretiens.length-1:this.indexCurrentDate+1,this.currentDate=this.datesOfEntretiens[this.indexCurrentDate],this.getEntretiens())}previousDate(){this.indexCurrentDate>0&&(this.indexCurrentDate=this.indexCurrentDate<0?0:this.indexCurrentDate-1,this.currentDate=this.datesOfEntretiens[this.indexCurrentDate],this.getEntretiens())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Y),e.Y36(E.V),e.Y36(i.R),e.Y36(d.v),e.Y36(o.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-calendrier-entretien"]],decls:42,vars:7,consts:[[1,"calendrier-entretien-page","calendrier-page","page-content"],[1,"page-title"],[1,"pi","pi-angle-right"],["pButton","","pRipple","","type","button","icon","pi pi-download","pTooltip","T\xe9l\xe9charger le calendrier des entretiens",1,"ml-2","p-button-sm","p-button-raised","p-button-rounded","p-button-warning","p-button-text",3,"click"],[1,"card"],[1,"header"],[1,"title"],["class","text-sm cursor-pointer hover:text-orange-500",3,"click",4,"ngIf"],["placeholder","Choisir un intervenant",3,"options","showClear","ngModel","onChange","ngModelChange",4,"ngIf"],["class","btn btn-danger ml-1 mr-1",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"line"],[1,"sub-header"],["class","title",4,"ngIf"],[1,"calendrier"],["id","table"],[4,"ngFor","ngForOf"],["colspan","4",1,"pause"],[1,"text-sm","cursor-pointer","hover:text-orange-500",3,"click"],["class","pi pi-eye-slash",4,"ngIf"],["class","pi pi-eye",4,"ngIf"],[1,"pi","pi-eye-slash"],[1,"pi","pi-eye"],["placeholder","Choisir un intervenant",3,"options","showClear","ngModel","onChange","ngModelChange"],[1,"btn","btn-danger","ml-1","mr-1",3,"click"],[1,"btn","btn-primary",3,"click"],["class","rowspan",4,"ngIf"],[4,"ngIf"],[1,"rowspan"]],template:function(t,r){1&t&&(e.TgZ(0,"section",0)(1,"h1",1),e._uU(2," Entretiens "),e._UZ(3,"i",2),e._uU(4," Calendrier des entretiens "),e.TgZ(5,"button",3),e.NdJ("click",function(){return r.downloadPlanningEntretien()}),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div")(9,"h3",6),e._uU(10,"Calendrier final des entretiens"),e.qZA(),e.YNc(11,O,4,2,"span",7),e.qZA(),e.TgZ(12,"div"),e.YNc(13,M,1,3,"p-dropdown",8),e.YNc(14,J,2,0,"button",9),e.YNc(15,S,2,0,"button",10),e.qZA()(),e._UZ(16,"div",11),e.TgZ(17,"div",12)(18,"h3",6),e._uU(19,"Entretiens concours Ucac-Icam"),e.qZA(),e.YNc(20,y,3,3,"h3",13),e.qZA(),e.TgZ(21,"div",14)(22,"table",15)(23,"thead")(24,"th"),e._uU(25,"Horaire"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Centre d'examen"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Noms"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Pr\xe9nom"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Intervenants"),e.qZA()(),e.TgZ(34,"tbody"),e.YNc(35,Y,13,12,"tr",16),e.TgZ(36,"tr")(37,"td"),e._uU(38,"12h00 - 13h00"),e.qZA(),e.TgZ(39,"td",17),e._uU(40,"Pause"),e.qZA()(),e.YNc(41,P,12,11,"tr",16),e.qZA()()()()()),2&t&&(e.xp6(11),e.Q6J("ngIf","JURY"!=r.compte.role),e.xp6(2),e.Q6J("ngIf","JURY"!=r.compte.role),e.xp6(1),e.Q6J("ngIf",r.datesOfEntretiens.length>1),e.xp6(1),e.Q6J("ngIf",r.datesOfEntretiens.length>1),e.xp6(5),e.Q6J("ngIf",r.currentDate),e.xp6(15),e.Q6J("ngForOf",r.entretiensBeforeBreak),e.xp6(6),e.Q6J("ngForOf",r.entretiensAfterBreak))},directives:[u.Hq,_.u,f.O5,x.Lt,C.JJ,C.On,f.sg],pipes:[f.uU],encapsulation:2}),n})();var U=a(7671),b=a(7618);const q=[{path:"",component:I,canActivate:[b.a]},{path:"**",component:I,canActivate:[b.a]}];let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[b.a],imports:[[U.Bz.forChild(q)],U.Bz]}),n})(),L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.ez,R,C.u5,C.UX,_.z,u.hJ,x.kW]]}),n})()},62:(A,w,a)=>{a.d(w,{v:()=>e});var f=a(9808),v=a(7587);let e=(()=>{class m{constructor(){}calculerJours(i,d){var o=Math.abs(d-i);return Math.floor(o/864e5)}clear(i){i.clear()}getStatuses(){return[{label:!1,value:"A faire"},{label:!0,value:"R\xe9alis\xe9"}]}getSeverity(i){switch(i){case!1:return"danger";case!0:return"success";default:return"warning"}}getStatusLabel(i){switch(i){case!1:return"A faire";case!0:return"R\xe9alis\xe9";default:return""}}getFormationLabel(i){return"Ing\xe9nieur g\xe9n\xe9raliste parcours international"==i?"OP":"Ing\xe9nieur g\xe9n\xe9raliste par apprentissage ou g\xe9nie des proc\xe9d\xe9s"==i?"L":"Ing\xe9nieur genie des proc\xe9d\xe9s"==i?"IP":"Ing\xe9nieur g\xe9neraliste parcours international et innovation"==i?"I":"Ing\xe9nieur g\xe9nie Informtique"==i?"X":""}genererDates(i,d){let o=this.calculerJours(i,d);console.log("nombre jour:",o);let u=[],_=new Date(i);u.push(new Date(i));for(let x=0;x<o;x++)_.setDate(_.getDate()+1),u.push(new Date(_));return u}formatDate(i){let o=(0,f.p6)(i,"shortTime","fr-FR").split(":");return parseInt(o[0],10)-1+"h"+o[1]}buildDateWithTime(i){const d=new Date;return new Date(`${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()} ${i}`)}buildDate(i,d){let u,_,o=d.split("-"),C=o[0].split("h");i.setHours(parseInt(C[0],10)+1),i.setMinutes(parseInt(C[1],10)),u=i.getTime();let D=o[1].split("h");return i.setHours(parseInt(D[0],10)+1),i.setMinutes(parseInt(D[1],10)),_=i.getTime(),{startDate:u,endDate:_}}}return m.\u0275fac=function(i){return new(i||m)},m.\u0275prov=v.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},8766:(A,w,a)=>{a.d(w,{Y:()=>E});var f=a(2340),v=a(7587),e=a(520),m=a(4920);let E=(()=>{class i{constructor(o,u){this.http=o,this.baseUrlSvr=u,this.url="",this.url=`${this.baseUrlSvr.getOrigin()}${f.N.interviewPath}`,this.url+="note/"}allNotesEntretien(){return this.http.get(this.url+"allNotesEntretien")}downloadPlanningEntretien(){return this.http.get(this.url+"download/planningEntretiens",{responseType:"arraybuffer"})}downloadPlanningEntretienUrl(){return this.url+"download/planningEntretiens"}liste(){return this.http.get(this.url+"all")}getOne(o){return this.http.get(this.url+o)}create(o){return this.http.post(this.url+"create",o)}update(o){return this.http.patch(this.url+(null==o?void 0:o.id),o)}delete(o){return this.http.delete(this.url+o)}}return i.\u0275fac=function(o){return new(o||i)(v.LFG(e.eN),v.LFG(m.x))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);
"use strict";(self.webpackChunkadmin_ucac_dashboard=self.webpackChunkadmin_ucac_dashboard||[]).push([[590],{1590:(Z,m,a)=>{a.r(m),a.d(m,{NoteEntretienModule:()=>P});var d=a(9808),p=a(7671),s=a(2382),g=a(6093),f=a(4074),t=a(7587),v=a(8766),c=a(62),N=a(2042);function T(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"i",31),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).searchValue=""}),t.qZA()}}function C(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t._UZ(3,"td"),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"button",32),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).updateNote(o)}),t.TgZ(12,"div"),t._UZ(13,"i",33),t.qZA(),t.TgZ(14,"span"),t._uU(15," Note "),t.qZA()()()()}if(2&i){const e=l.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(r.getHoraire(e)),t.xp6(3),t.Oqu(null==e.candidature||null==e.candidature.compte?null:e.candidature.compte.name),t.xp6(2),t.Oqu(null==e.candidature||null==e.candidature.compte?null:e.candidature.compte.prenom),t.xp6(2),t.Oqu(e.note)}}function E(i,l){1&i&&(t.TgZ(0,"tr")(1,"td",34)(2,"span",35),t._uU(3," Aucune notes trouv\xe9es avec ces lettres dans son nom "),t.qZA()()())}function A(i,l){1&i&&(t.TgZ(0,"tr")(1,"td",34)(2,"span",35),t._uU(3," Aucune notes presentent dans la base "),t.qZA()()())}function U(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"li",36)(1,"a",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).previous()}),t._uU(2,"Pr\xe9cedent"),t.qZA()()}}function I(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"li",38)(1,"a",39),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).next()}),t._uU(2,"Suivant"),t.qZA()()}}const _=function(i){return{bold:i}};function M(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"section",2)(1,"h1",3),t._uU(2," Entretiens "),t._UZ(3,"i",4),t._uU(4," Notes entretiens"),t.qZA(),t.TgZ(5,"div",5)(6,"div",6)(7,"h3",7),t._uU(8,"Liste de passage de vos entretiens"),t.qZA()(),t._UZ(9,"div",8),t.TgZ(10,"div",9)(11,"div",10)(12,"div",11)(13,"span"),t._uU(14,"Voir"),t.qZA(),t.TgZ(15,"select",12),t.NdJ("change",function(n){return t.CHM(e),t.oxw().handlePageSize(n)})("ngModelChange",function(n){return t.CHM(e),t.oxw().pageSize=n}),t.TgZ(16,"option",13),t._uU(17,"10"),t.qZA(),t.TgZ(18,"option",14),t._uU(19,"25"),t.qZA(),t.TgZ(20,"option",15),t._uU(21,"50"),t.qZA(),t.TgZ(22,"option",16),t._uU(23,"100"),t.qZA()(),t.TgZ(24,"span"),t._uU(25,"entr\xe9es"),t.qZA()(),t.TgZ(26,"div",17)(27,"span"),t._uU(28,"Rechercher"),t.qZA(),t.TgZ(29,"div")(30,"input",18),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().searchValue=n})("keyup",function(n){return t.CHM(e),t.oxw().handleSearchValue(n)}),t.qZA(),t.YNc(31,T,1,0,"i",19),t.qZA()()(),t.TgZ(32,"div",20)(33,"table",21)(34,"tr")(35,"th")(36,"div"),t._uU(37," Horaires "),t.TgZ(38,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("horaire")}),t.qZA()()(),t.TgZ(39,"th")(40,"div"),t._uU(41," Note d'examen "),t.TgZ(42,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("note")}),t.qZA()()(),t.TgZ(43,"th")(44,"div"),t._uU(45," Nom "),t.TgZ(46,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("nom")}),t.qZA()()(),t.TgZ(47,"th")(48,"div"),t._uU(49," Pr\xe9nom "),t.TgZ(50,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("prenom")}),t.qZA()()(),t.TgZ(51,"th")(52,"div"),t._uU(53," Note "),t.TgZ(54,"i",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().sort("note")}),t.qZA()()(),t.TgZ(55,"th")(56,"div"),t._uU(57," # "),t.qZA()()(),t.YNc(58,C,16,4,"tr",23),t.YNc(59,E,4,0,"tr",24),t.YNc(60,A,4,0,"tr",24),t.qZA()(),t.TgZ(61,"div",25)(62,"span"),t._uU(63),t.qZA(),t.TgZ(64,"ul",26),t.YNc(65,U,3,0,"li",27),t.TgZ(66,"li",28)(67,"a",29),t._uU(68,"1"),t.qZA()(),t.YNc(69,I,3,0,"li",30),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(15),t.Q6J("ngModel",e.pageSize),t.xp6(15),t.Q6J("ngModel",e.searchValue),t.xp6(1),t.Q6J("ngIf",e.searchValue),t.xp6(7),t.Gre("icon-sort ","horaire"==e.sortProperty?e.sortIcon:e.downUpIcon,""),t.Q6J("ngClass",t.VKq(31,_,"horaire"==e.sortProperty)),t.xp6(4),t.Gre("icon-sort ","note"==e.sortProperty?e.sortIcon:e.downUpIcon,""),t.Q6J("ngClass",t.VKq(33,_,"note"==e.sortProperty)),t.xp6(4),t.Gre("icon-sort ","nom"==e.sortProperty?e.sortIcon:e.downUpIcon,""),t.Q6J("ngClass",t.VKq(35,_,"nom"==e.sortProperty)),t.xp6(4),t.Gre("icon-sort ","prenom"==e.sortProperty?e.sortIcon:e.downUpIcon,""),t.Q6J("ngClass",t.VKq(37,_,"prenom"==e.sortProperty)),t.xp6(4),t.Gre("icon-sort ","note"==e.sortProperty?e.sortIcon:e.downUpIcon,""),t.Q6J("ngClass",t.VKq(39,_,"note"==e.sortProperty)),t.xp6(4),t.Q6J("ngForOf",e.notes),t.xp6(1),t.Q6J("ngIf",e.searchValue&&0===e.notes.length),t.xp6(1),t.Q6J("ngIf",!e.searchValue&&0===e.notes.length),t.xp6(3),t.lnq("Page ",e.page," sur ",e.nbrOfPage,", avec ",e.notes.length," entr\xe9es affich\xe9es"),t.xp6(2),t.Q6J("ngIf",e.page>1),t.xp6(4),t.Q6J("ngIf",e.page<e.nbrOfPage)}}function b(i,l){}let w=(()=>{class i{constructor(e,r,n){this.noteSrv=e,this.commonService=r,this.siteSrv=n,this.notes=[],this.sites=[],this.searchNotes=[],this.loading=!0,this.formNote=new s.cw({nom:new s.NI("",[s.kI.required]),prenom:new s.NI("",[s.kI.required]),horaire:new s.NI("",[s.kI.required]),centre:new s.NI("",[s.kI.required]),note:new s.NI(0,[s.kI.required])})}ngOnInit(){this.sortProperty="horaire",this.sortIcon="fa-solid fa-arrow-down-short-wide",this.downUpIcon="pi pi-sort-alt",this.pageSize=10,this.page=1,this.getNotes()}sort(e,r=this.notes){return this.sortProperty=e,this.isAsc=!this.isAsc,this.sortIcon=this.isAsc?"fa-solid fa-arrow-down-short-wide":"fa-solid fa-arrow-down-wide-short","nom"===e&&r.sort(this.isAsc?(n,o)=>n.candidature.compte.name>o.candidature.compte.name?1:o.candidature.compte.name>n.candidature.compte.name?-1:0:(n,o)=>n.candidature.compte.name>o.candidature.compte.name?-1:o.candidature.compte.name>n.candidature.compte.name?1:0),"prenom"===e&&r.sort(this.isAsc?(n,o)=>n.candidature.compte.prenom>o.candidature.compte.prenom?1:o.candidature.compte.prenom>n.candidature.compte.prenom?-1:0:(n,o)=>n.candidature.compte.prenom>o.candidature.compte.prenom?-1:o.candidature.compte.prenom>n.candidature.compte.prenom?1:0),"note"===e&&r.sort(this.isAsc?(n,o)=>n.note>o.note?1:o.note>n.note?-1:0:(n,o)=>n.note>o.note?-1:o.note>n.note?1:0),r}get formNoteControl(){return this.formNote.controls}handlePageSize(e){this.getNotes()}handleSearchValue(e){if(this.searchValue=e.target.value,""!==this.searchValue){let n=this.searchNotes.map(o=>{var u,h;return null===(h=null===(u=o.candidature)||void 0===u?void 0:u.compte)||void 0===h?void 0:h.name}).filter(o=>o.toLowerCase().indexOf(this.searchValue.toLowerCase()+"")>-1);if(0===n.length)this.notes=[];else{let o=[];for(let u=0;u<n.length;u++){const h=n[u];let S=this.searchNotes.filter(J=>J.candidature.compte.name.indexOf(""+h)>-1);o.push(...S)}this.notes=o}}else this.notes=this.searchNotes}next(){this.page++,this.getNotes()}previous(){this.page--,this.getNotes()}getNotes(){this.noteSrv.liste().subscribe({next:e=>{e=this.sort("nom",e),this.searchNotes=[],this.searchNotes=e,this.notes=e.map((r,n)=>Object.assign({id:n+1},r)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.collectionSize=e.length,this.nbrOfPage=Math.ceil(e.length/this.pageSize)},error:e=>{console.log("error: ",e)}})}viewNote(e="data"){this.isFormNote="data"!==e}getHoraire(e){return this.commonService.formatDate(e.debut_entretien)+" - "+this.commonService.formatDate(e.fin_entretien)}updateNote(e){var r,n,o,u;this.isFormNote=!0,this.note=e,this.formNote.setValue({nom:null===(n=null===(r=e.candidature)||void 0===r?void 0:r.compte)||void 0===n?void 0:n.name,prenom:null===(u=null===(o=e.candidature)||void 0===o?void 0:o.compte)||void 0===u?void 0:u.prenom,note:e.note})}createOrUpdateNote(){var e;let r=new f.T;if(null===(e=this.note)||void 0===e?void 0:e.id){let n=Object.assign({},this.formNote.value);delete n.note,n=Object.assign(Object.assign({},n),{note:parseInt(this.formNote.value.note,10)}),this.noteSrv.update(Object.assign(Object.assign({},n),{site:r,id:this.note.id})).subscribe({next:o=>{this.getNotes(),this.note=new g.j,this.formNote.reset(),this.isFormNote=!1},error:o=>{console.log("Error: ",o)}})}else{let n=Object.assign({},this.formNote.value);delete n.note,n=Object.assign(Object.assign({},n),{note:parseInt(this.formNote.value.note,10)}),this.noteSrv.create(n).subscribe({next:o=>{this.getNotes(),this.note=new g.j,this.formNote.reset(),this.isFormNote=!1},error:o=>{console.log("Error: ",o)}})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.Y),t.Y36(c.v),t.Y36(N.P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-note-entretien"]],decls:3,vars:2,consts:[["class","note-page page-content",4,"ngIf","ngIfElse"],["addNote",""],[1,"note-page","page-content"],[1,"page-title"],[1,"pi","pi-angle-right"],[1,"card"],[1,"header"],[1,"title"],[1,"line"],[1,"table-content"],[1,"search-content"],[1,"select-page-size"],["name","page-size","id","page-size",3,"ngModel","change","ngModelChange"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"search_value"],["type","text","name","value","id","value",3,"ngModel","ngModelChange","keyup"],["class","fa fa-close pull-right",3,"click",4,"ngIf"],[1,"row"],["id","table"],[3,"ngClass","click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pagination_content"],[1,"pagination"],["class","paginate_button previous disabled","id","datatable-responsive_previous",4,"ngIf"],[1,"paginate_button","active"],["aria-controls","datatable-responsive","data-dt-idx","1","tabindex","0"],["class","paginate_button next disabled","id","datatable-responsive_next",4,"ngIf"],[1,"fa","fa-close","pull-right",3,"click"],[1,"btn",3,"click"],[1,"fa-solid","fa-pencil"],["colspan","6"],[1,"vh-center"],["id","datatable-responsive_previous",1,"paginate_button","previous","disabled"],["aria-controls","datatable-responsive","data-dt-idx","0","tabindex","0",3,"click"],["id","datatable-responsive_next",1,"paginate_button","next","disabled"],["aria-controls","datatable-responsive","data-dt-idx","2","tabindex","0",3,"click"]],template:function(e,r){if(1&e&&(t.YNc(0,M,70,41,"section",0),t.YNc(1,b,0,0,"ng-template",null,1,t.W1O)),2&e){const n=t.MAs(2);t.Q6J("ngIf",!r.isFormNote)("ngIfElse",n)}},directives:[d.O5,s.EJ,s.JJ,s.On,s.YN,s.Kr,s.Fj,d.mk,d.sg],encapsulation:2}),i})();var x=a(7618);const O=[{path:"",component:w,canActivate:[x.a]}];let q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[x.a],imports:[[p.Bz.forChild(O)],p.Bz]}),i})(),P=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.ez,q,s.u5,s.UX]]}),i})()},2042:(Z,m,a)=>{a.d(m,{P:()=>f});var d=a(2340),p=a(7587),s=a(520),g=a(4920);let f=(()=>{class t{constructor(c,N){this.http=c,this.baseUrlSvr=N,this.url="",this.url=`${this.baseUrlSvr.getOrigin()}${d.N.administrationPath}`,this.url+="site/"}liste(){return this.http.get(this.url+"all")}allByZone(c){return this.http.get(this.url+"allbyzone/"+c)}getOne(c){return this.http.get(this.url+c)}create(c){return this.http.post(this.url+"create",c)}update(c){return this.http.patch(this.url+(null==c?void 0:c.id),c)}delete(c){return this.http.delete(this.url+c)}}return t.\u0275fac=function(c){return new(c||t)(p.LFG(s.eN),p.LFG(g.x))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);